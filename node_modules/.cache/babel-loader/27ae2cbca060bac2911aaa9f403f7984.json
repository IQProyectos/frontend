{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Usuario WTK\\\\Desktop\\\\zzzzzzzzzzzzzzzzzzzzzzzzzz Proyecto 2\\\\frontend\\\\src\\\\pages\\\\Data\\\\CreateData.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport Container from '@material-ui/core/Container';\nimport TextField from '@material-ui/core/TextField';\nimport Pagination from '@mui/material/Pagination';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport AddIcon from '@material-ui/icons/Add';\nimport Controls from \"../../components/controls/Controls\";\nimport { Link } from 'react-router-dom';\nimport UploadFile from '@mui/icons-material/UploadFile';\nimport { v4 as uuidv4 } from 'uuid';\nimport axios from \"axios\";\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Fade from '@material-ui/core/Fade';\nimport Box from '@material-ui/core/Box';\nimport InfoIcon from '@material-ui/icons/Info';\nimport PageHeader from \"../../components/PageHeader\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport Avatar from '@material-ui/core/Avatar';\nimport { green, red, grey, blue } from '@material-ui/core/colors';\nimport { addData } from \"../../services/dataService\";\nimport Tooltip from '@mui/material/Tooltip';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Slide from '@material-ui/core/Slide';\nimport Typography from '@mui/material/Typography';\nimport Card from '@mui/material/Card';\nimport CardMedia from '@mui/material/CardMedia';\nimport VisibilityIcon from '@mui/icons-material/Visibility';\nimport ClearIcon from '@mui/icons-material/Clear';\nimport FileUploadIcon from '@mui/icons-material/FileUpload';\nimport Collapse from '@mui/material/Collapse';\nimport CloseIcon from '@mui/icons-material/Close';\nimport { getBase64 } from '../../services/getFileService';\nimport Alert from '@mui/material/Alert';\nimport FileManager from '../../components/FileManager';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    '& .MuiTextField-root': {\n      margin: theme.spacing(1)\n    },\n    '& .Mui-disabled': {\n      color: \"#2f2c33\"\n    }\n  },\n  color: {\n    background: green[\"100\"]\n  },\n  button: {\n    margin: theme.spacing(1)\n  },\n  add: {\n    backgroundColor: green[600]\n  },\n  remove: {\n    backgroundColor: red[400]\n  },\n  buttonFixed: {\n    position: \"fixed\"\n  },\n  image: {\n    backgroundColor: grey.A100,\n    \"&:hover\": {\n      backgroundColor: blue[50]\n    }\n  },\n  showImg: {\n    backgroundColor: grey.A100,\n    \"&:hover\": {\n      backgroundColor: blue[50]\n    }\n  },\n  removeImg: {\n    backgroundColor: grey.A100,\n    \"&:hover\": {\n      backgroundColor: blue[50]\n    }\n  }\n}));\nconst Transition = /*#__PURE__*/React.forwardRef(_c = function Transition(props, ref) {\n  return /*#__PURE__*/_jsxDEV(Slide, {\n    direction: \"up\",\n    ref: ref,\n    ...props\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 12\n  }, this);\n});\n_c2 = Transition;\n\nfunction CreateData() {\n  _s();\n\n  const {\n    pid,\n    bid\n  } = useParams();\n  const [factors, setFactors] = useState([]);\n  const [factorsObj, setFactorsObj] = useState({});\n  const [open, setOpen] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = React.useState(true);\n  const classes = useStyles();\n  const [inputFields, setInputFields] = useState([]);\n  const [page, setPage] = React.useState(0);\n  const [count, setCount] = React.useState(0);\n  const [openDialog, setOpenDialog] = useState(false);\n  const [showCard, setShowCard] = useState(true);\n  const [image, setImage] = useState(\"\");\n  const [cardPositionX, setCardPositionX] = useState(0);\n  const [cardPositionY, setCardPositionY] = useState(0);\n  const [CSVData, setCSVData] = useState(\"\");\n  const message = \"Se han registrado los datos!\";\n  let date_ob = new Date();\n  let date = (\"0\" + date_ob.getDate()).slice(-2); // current month\n\n  let month = (\"0\" + (date_ob.getMonth() + 1)).slice(-2); // current year\n\n  let year = date_ob.getFullYear();\n  let t_time = date_ob.getHours() + \":\" + date_ob.getMinutes();\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${localStorage.getItem(\"authToken\")}`\n    }\n  };\n\n  function wrapValues(factors, facObj) {\n    setFactors(factors);\n    setFactorsObj(facObj);\n    cleanData(facObj);\n    setLoading(false);\n    setCount(1);\n    setPage(1);\n  }\n\n  async function getAllFactors() {\n    try {\n      const response = await axios.get(`http://localhost:5000/api/private/factorproject/${bid}`, config);\n      let facObj = {\n        \"fecha\": \"\",\n        \"hora\": \"\"\n      };\n      response.data.factors.forEach(factor => {\n        facObj[factor.name] = \"\";\n      });\n      wrapValues(response.data.factors, facObj);\n    } catch (error) {\n      setTimeout(() => {\n        setTimeout(() => {\n          setOpen(false);\n          setError(\"\");\n        }, 2000);\n      }, 5000);\n      setOpen(true);\n      return setError(\"Authentication failed!\");\n    }\n  }\n\n  useEffect(() => {\n    let unmounted = false;\n    getAllFactors();\n    return () => {\n      unmounted = true;\n    };\n  }, []);\n\n  const cleanData = facObj => {\n    setOpenDialog(false);\n    let first = Object.assign({}, facObj);\n    first.fecha = year + \"-\" + month + \"-\" + date;\n    first.hora = \"00:00\";\n    first.id = uuidv4();\n    setInputFields([first]);\n  };\n\n  const handleChangePage = (event, value) => {\n    setPage(value);\n  };\n\n  const handleAddDataFromCSV = (e, value) => {\n    e.preventDefault();\n    let csvKeys = Object.keys(CSVData[0]);\n    let realKeys = [];\n\n    for (let i = 0; i < factors.length; i++) {\n      realKeys.push(factors[i].name);\n    }\n\n    let canProceed = true;\n\n    for (let i = 0; i < csvKeys.length; i++) {\n      if (!csvKeys.includes(realKeys[i])) {\n        canProceed = false;\n      }\n    }\n\n    if (canProceed) {\n      let data = {\n        \"projectID\": bid,\n        \"programID\": pid,\n        \"values\": []\n      };\n\n      for (let i = 0; i < CSVData.length; i++) {\n        let element = {};\n        element.timestamp = year + \"-\" + month + \"-\" + date + \"T\" + t_time;\n        element.values = CSVData[i];\n        data.values.push(element);\n      }\n\n      try {\n        addData(data).then(() => {\n          setOpen(true);\n          cleanData(factorsObj);\n        });\n      } catch (error) {\n        setTimeout(() => {\n          setTimeout(() => {\n            setOpen(false);\n            setError(\"\");\n          }, 2000);\n        }, 5000);\n        setOpen(true);\n        return setError(\"Authentication failed!\");\n      }\n    } else {\n      console.log(\"Cant upload\");\n    }\n  };\n\n  const parseInput = async () => {\n    return new Promise(resolve => {\n      let data = {\n        \"projectID\": bid,\n        \"programID\": pid,\n        \"values\": []\n      };\n\n      const forEachLoop = async _ => {\n        for (let index = 0; index < inputFields.length; index++) {\n          let element = {};\n          element.timestamp = inputFields[index].fecha + \"T\" + inputFields[index].hora;\n          element.values = {};\n\n          for (let index_2 = 0; index_2 < factors.length; index_2++) {\n            if (factors[index_2].type === \"value\" || inputFields[index][factors[index_2].name] === \"\") {\n              element.values[factors[index_2].name] = inputFields[index][factors[index_2].name];\n            } else {\n              let file = inputFields[index][factors[index_2].name];\n              element.values[factors[index_2].name] = await getBase64(file);\n            }\n          }\n\n          data.values.push(element);\n        }\n      };\n\n      forEachLoop().then(() => {\n        resolve(data);\n      });\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    let data = await parseInput();\n\n    try {\n      addData(data).then(() => {\n        setOpen(true);\n        cleanData(factorsObj);\n      });\n    } catch (error) {\n      setTimeout(() => {\n        setTimeout(() => {\n          setOpen(false);\n          setError(\"\");\n        }, 2000);\n      }, 5000);\n      setOpen(true);\n      return setError(\"Authentication failed!\");\n    }\n  };\n\n  const handleChangeInput = (id, event) => {\n    const newInputFields = inputFields.map(i => {\n      if (id === i.id) {\n        i[event.target.name] = event.target.value;\n      }\n\n      return i;\n    });\n    console.log(newInputFields);\n    setInputFields(newInputFields);\n  };\n\n  const handleChangeImageInput = (id, event) => {\n    const newInputFields = inputFields.map(i => {\n      if (id === i.id) {\n        i[event.target.name] = event.target.files[0];\n      }\n\n      return i;\n    });\n    setInputFields(newInputFields);\n  };\n\n  const handleAddFields = () => {\n    let newColumn = Object.assign({}, factorsObj);\n    newColumn.fecha = year + \"-\" + month + \"-\" + date;\n    newColumn.hora = \"00:00\";\n    newColumn.id = uuidv4(); //for (x in a){b[x] = 1}\n\n    setInputFields([...inputFields, newColumn]);\n    let con = inputFields.length + 1;\n    let result = con % 3 === 0 ? parseInt(con / 3) : 1 + parseInt(con / 3);\n\n    if (result > count) {\n      setCount(result);\n    }\n\n    if (page < result) {\n      setPage(result);\n    }\n  };\n\n  const handleRemoveFields = id => {\n    const values = [...inputFields];\n    values.splice(values.findIndex(value => value.id === id), 1);\n    setInputFields(values);\n    let con = inputFields.length - 1;\n    let result = con % 3 === 0 ? parseInt(con / 3) : 1 + parseInt(con / 3);\n\n    if (result < count) {\n      setCount(result);\n      setPage(result);\n    }\n  };\n\n  const removeImage = (id, factorName) => {\n    const newInputFields = inputFields.map(i => {\n      if (id === i.id) {\n        i[factorName] = \"\";\n      }\n\n      return i;\n    });\n    setInputFields(newInputFields);\n  };\n\n  const displayCard = (isCard, id, factorName, event) => {\n    setCardPositionX(event.clientX - 250);\n    setCardPositionY(event.clientY - 750);\n    let srcImage = \"\";\n\n    if (isCard !== \"\") {\n      inputFields.every(input => {\n        if (input.id === id) {\n          srcImage = URL.createObjectURL(input[factorName]);\n          return false;\n        }\n\n        return true;\n      });\n    }\n\n    setShowCard(isCard);\n    setImage(srcImage);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(PageHeader, {\n      title: \"A\\xF1adir datos al lugar\",\n      subTitle: \"Al crear los datos, se podr\\xE1 realizar la predicci\\xF3n\",\n      icon: /*#__PURE__*/_jsxDEV(InfoIcon, {\n        fontSize: \"Large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 23\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.programholder,\n      hidden: !loading,\n      children: [/*#__PURE__*/_jsxDEV(Fade, {\n        in: loading,\n        style: {\n          transitionDelay: '0m'\n        },\n        unmountOnExit: true,\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(Pagination, {\n        sx: {\n          mt: 1\n        },\n        size: \"large\",\n        variant: \"outlined\",\n        color: \"standard\",\n        count: count,\n        siblingCount: 0,\n        boundaryCount: 2,\n        page: page,\n        onChange: handleChangePage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n      in: open,\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        severity: error ? \"error\" : \"success\",\n        action: /*#__PURE__*/_jsxDEV(IconButton, {\n          \"aria-label\": \"close\",\n          color: \"inherit\",\n          size: \"small\",\n          onClick: () => {\n            setOpen(false);\n          },\n          children: /*#__PURE__*/_jsxDEV(CloseIcon, {\n            fontSize: \"inherit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 25\n        }, this),\n        children: error ? error : message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: classes.root,\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(Dialog, {\n        open: openDialog,\n        TransitionComponent: Transition,\n        keepMounted: true,\n        onClose: () => setOpenDialog(false),\n        \"aria-labelledby\": \"alert-dialog-slide-title\",\n        \"aria-describedby\": \"alert-dialog-slide-description\",\n        children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n          id: \"alert-dialog-slide-title\",\n          children: \"\\xBFSeguro que desea guardar la informaci\\xF3n?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => setOpenDialog(false),\n            color: \"standard\",\n            children: \"Cancelar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            onClick: handleSubmit,\n            color: \"primary\",\n            children: \"Enviar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'flex-start',\n          ml: \"5%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              justifyContent: 'center'\n            },\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              sx: {\n                m: \"8px\",\n                py: \"6px\",\n                px: \"20px\",\n                width: \"100%\",\n                borderRadius: 1\n              },\n              align: \"center\",\n              variant: \"subtitle1\",\n              component: \"div\",\n              hidden: factors.length === 0,\n              className: classes.color,\n              children: \"Fecha\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              justifyContent: 'center'\n            },\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              sx: {\n                m: \"8px\",\n                py: \"6px\",\n                px: \"20px\",\n                width: \"100%\",\n                borderRadius: 1\n              },\n              align: \"center\",\n              variant: \"subtitle1\",\n              component: \"div\",\n              hidden: factors.length === 0,\n              className: classes.color,\n              children: \"Hora\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 25\n          }, this), factors.map(factor => /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              justifyContent: 'center'\n            },\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              sx: {\n                m: \"8px\",\n                py: \"6px\",\n                px: \"20px\",\n                width: \"100%\",\n                borderRadius: 1\n              },\n              align: \"center\",\n              variant: \"subtitle1\",\n              component: \"div\",\n              className: classes.color,\n              children: factor.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 516,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 512,\n            columnNumber: 29\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 21\n        }, this), inputFields.map((inputField, index) => 3 * page - index >= 1 && 3 * page - index <= 3 && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              justifyContent: 'center'\n            },\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              type: \"date\",\n              name: \"fecha\",\n              style: {\n                width: \"100%\"\n              },\n              defaultValue: year + \"-\" + month + \"-\" + date,\n              variant: \"outlined\",\n              size: \"small\",\n              value: inputField.fecha,\n              onChange: event => handleChangeInput(inputField.id, event)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 540,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 536,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              justifyContent: 'center'\n            },\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              style: {\n                width: \"100%\"\n              },\n              type: \"time\",\n              name: \"hora\",\n              defaultValue: \"00:00\",\n              size: \"small\",\n              variant: \"outlined\",\n              value: inputField.hora,\n              onChange: event => handleChangeInput(inputField.id, event)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 555,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 551,\n            columnNumber: 29\n          }, this), factors.map(factor => /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              justifyContent: 'center'\n            },\n            children: factor.type === \"value\" ? /*#__PURE__*/_jsxDEV(TextField, {\n              type: \"number\",\n              name: factor.name,\n              label: \"\",\n              size: \"small\",\n              variant: \"outlined\",\n              value: inputField[factor.name],\n              onChange: event => handleChangeInput(inputField.id, event)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 572,\n              columnNumber: 43\n            }, this) : inputFields[index][factor.name] === \"\" ? /*#__PURE__*/_jsxDEV(Tooltip, {\n              title: \"Subir imagen\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                style: {\n                  margin: \"8px\",\n                  width: \"100%\",\n                  paddingTop: \"8px\",\n                  paddingBottom: \"8px\",\n                  paddingLeft: \"20px\",\n                  paddingRight: \"20px\"\n                },\n                variant: \"contained\",\n                component: \"label\",\n                className: classes.image,\n                children: [/*#__PURE__*/_jsxDEV(UploadFile, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 596,\n                  columnNumber: 53\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  name: factor.name,\n                  accept: \"image/*\",\n                  id: \"raised-button-file\",\n                  type: \"file\",\n                  hidden: true,\n                  onChange: event => handleChangeImageInput(inputField.id, event)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 597,\n                  columnNumber: 53\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 583,\n                columnNumber: 49\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 582,\n              columnNumber: 47\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n                title: \"Abrir imagen\",\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  style: {\n                    margin: \"8px\",\n                    width: \"75%\",\n                    paddingTop: \"8px\",\n                    paddingBottom: \"8px\",\n                    paddingLeft: \"20px\",\n                    paddingRight: \"20px\"\n                  },\n                  variant: \"contained\",\n                  onMouseEnter: event => displayCard(false, inputField.id, factor.name, event),\n                  onMouseLeave: event => displayCard(true, \"\", \"\", event),\n                  onClick: () => window.open(image),\n                  target: \"_blank\",\n                  className: classes.showImg,\n                  children: /*#__PURE__*/_jsxDEV(VisibilityIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 625,\n                    columnNumber: 57\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 609,\n                  columnNumber: 53\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                title: \"Remover imagen\",\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  style: {\n                    margin: \"8px\",\n                    width: \"25%\",\n                    paddingTop: \"8px\",\n                    paddingBottom: \"8px\",\n                    paddingLeft: \"20px\",\n                    paddingRight: \"20px\"\n                  },\n                  variant: \"contained\",\n                  className: classes.removeImg,\n                  onClick: () => removeImage(inputField.id, factor.name),\n                  children: /*#__PURE__*/_jsxDEV(ClearIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 642,\n                    columnNumber: 57\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 629,\n                  columnNumber: 53\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 628,\n                columnNumber: 49\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 33\n          }, this)), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              justifyContent: 'center'\n            },\n            children: /*#__PURE__*/_jsxDEV(Tooltip, {\n              title: \"Quitar columna\",\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                disabled: inputFields.length === 1,\n                onClick: () => handleRemoveFields(inputField.id),\n                children: /*#__PURE__*/_jsxDEV(Avatar, {\n                  className: classes.remove,\n                  children: /*#__PURE__*/_jsxDEV(RemoveIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 657,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 656,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 655,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 654,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 649,\n            columnNumber: 29\n          }, this)]\n        }, inputField.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 25\n        }, this)), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            alignItems: 'center'\n          },\n          children: /*#__PURE__*/_jsxDEV(Tooltip, {\n            title: \"A\\xF1adir nueva columna\",\n            children: /*#__PURE__*/_jsxDEV(IconButton, {\n              style: {\n                position: \"fixed\"\n              },\n              disabled: inputFields.length === 0,\n              var: true,\n              onClick: handleAddFields,\n              children: /*#__PURE__*/_jsxDEV(Avatar, {\n                className: classes.add,\n                children: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 674,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 673,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 670,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 669,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 664,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        children: /*#__PURE__*/_jsxDEV(Controls.Button, {\n          style: {\n            marginLeft: \"4.5%\"\n          },\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: () => setOpenDialog(true),\n          text: \"Guardar datos ingresados\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 683,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 682,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 690,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 691,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 692,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 693,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(PageHeader, {\n        title: \"Subir archivo CSV\",\n        subTitle: \"Ingresar información a la base de datos con un archivo CSV.\",\n        icon: /*#__PURE__*/_jsxDEV(FileUploadIcon, {\n          fontSize: \"large\",\n          color: \"primary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 697,\n          columnNumber: 27\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 694,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        style: {\n          width: \"90%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(FileManager, {\n          setCSVData: setCSVData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 702,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Controls.Button, {\n          text: \"Enviar datos\",\n          color: \"primary\",\n          onClick: handleAddDataFromCSV\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 703,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 700,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      sx: {\n        maxWidth: 300,\n        maxHeight: 300,\n        position: \"relative\",\n        top: cardPositionY,\n        left: cardPositionX\n      },\n      hidden: showCard,\n      children: /*#__PURE__*/_jsxDEV(CardMedia, {\n        component: \"img\",\n        height: \"194\",\n        image: image,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 720,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 710,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 388,\n    columnNumber: 9\n  }, this);\n}\n\n_s(CreateData, \"xaU4CDKDnwfTrCMTP6nt4j5gT8Q=\", false, function () {\n  return [useParams, useStyles];\n});\n\n_c3 = CreateData;\nexport default CreateData;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Transition$React.forwardRef\");\n$RefreshReg$(_c2, \"Transition\");\n$RefreshReg$(_c3, \"CreateData\");","map":{"version":3,"sources":["C:/Users/Usuario WTK/Desktop/zzzzzzzzzzzzzzzzzzzzzzzzzz Proyecto 2/frontend/src/pages/Data/CreateData.js"],"names":["React","useState","useEffect","useParams","Container","TextField","Pagination","Button","IconButton","RemoveIcon","AddIcon","Controls","Link","UploadFile","v4","uuidv4","axios","CircularProgress","Fade","Box","InfoIcon","PageHeader","makeStyles","Avatar","green","red","grey","blue","addData","Tooltip","Dialog","DialogActions","DialogTitle","Slide","Typography","Card","CardMedia","VisibilityIcon","ClearIcon","FileUploadIcon","Collapse","CloseIcon","getBase64","Alert","FileManager","useStyles","theme","root","margin","spacing","color","background","button","add","backgroundColor","remove","buttonFixed","position","image","A100","showImg","removeImg","Transition","forwardRef","props","ref","CreateData","pid","bid","factors","setFactors","factorsObj","setFactorsObj","open","setOpen","error","setError","loading","setLoading","classes","inputFields","setInputFields","page","setPage","count","setCount","openDialog","setOpenDialog","showCard","setShowCard","setImage","cardPositionX","setCardPositionX","cardPositionY","setCardPositionY","CSVData","setCSVData","message","date_ob","Date","date","getDate","slice","month","getMonth","year","getFullYear","t_time","getHours","getMinutes","config","headers","Authorization","localStorage","getItem","wrapValues","facObj","cleanData","getAllFactors","response","get","data","forEach","factor","name","setTimeout","unmounted","first","Object","assign","fecha","hora","id","handleChangePage","event","value","handleAddDataFromCSV","e","preventDefault","csvKeys","keys","realKeys","i","length","push","canProceed","includes","element","timestamp","values","then","console","log","parseInput","Promise","resolve","forEachLoop","_","index","index_2","type","file","handleSubmit","handleChangeInput","newInputFields","map","target","handleChangeImageInput","files","handleAddFields","newColumn","con","result","parseInt","handleRemoveFields","splice","findIndex","removeImage","factorName","displayCard","isCard","clientX","clientY","srcImage","every","input","URL","createObjectURL","programholder","transitionDelay","display","justifyContent","mt","ml","m","py","px","width","borderRadius","inputField","paddingTop","paddingBottom","paddingLeft","paddingRight","window","alignItems","marginLeft","maxWidth","maxHeight","top","left"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,OAAOC,OAAP,MAAoB,wBAApB;AACA,OAAOC,QAAP,MAAqB,oCAArB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,UAAP,MAAuB,gCAAvB;AACA,SAASC,EAAE,IAAIC,MAAf,QAA6B,MAA7B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,gBAAP,MAA6B,oCAA7B;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,GAAP,MAAgB,uBAAhB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,SAASC,KAAT,EAAgBC,GAAhB,EAAqBC,IAArB,EAA2BC,IAA3B,QAAuC,0BAAvC;AACA,SAASC,OAAT,QAAwB,4BAAxB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,aAAP,MAA0B,iCAA1B;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAOC,cAAP,MAA2B,gCAA3B;AACA,OAAOC,SAAP,MAAsB,2BAAtB;AACA,OAAOC,cAAP,MAA2B,gCAA3B;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,SAAP,MAAsB,2BAAtB;AACA,SAASC,SAAT,QAA0B,+BAA1B;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AAEA,OAAOC,WAAP,MAAwB,8BAAxB;;;AAEA,MAAMC,SAAS,GAAGvB,UAAU,CAAEwB,KAAD,KAAY;AACrCC,EAAAA,IAAI,EAAE;AACF,4BAAwB;AACpBC,MAAAA,MAAM,EAAEF,KAAK,CAACG,OAAN,CAAc,CAAd;AADY,KADtB;AAIF,uBAAmB;AACfC,MAAAA,KAAK,EAAE;AADQ;AAJjB,GAD+B;AASrCA,EAAAA,KAAK,EAAE;AACHC,IAAAA,UAAU,EAAE3B,KAAK,CAAC,KAAD;AADd,GAT8B;AAYrC4B,EAAAA,MAAM,EAAE;AACJJ,IAAAA,MAAM,EAAEF,KAAK,CAACG,OAAN,CAAc,CAAd;AADJ,GAZ6B;AAerCI,EAAAA,GAAG,EAAE;AACDC,IAAAA,eAAe,EAAE9B,KAAK,CAAC,GAAD;AADrB,GAfgC;AAkBrC+B,EAAAA,MAAM,EAAE;AACJD,IAAAA,eAAe,EAAE7B,GAAG,CAAC,GAAD;AADhB,GAlB6B;AAqBrC+B,EAAAA,WAAW,EAAE;AACTC,IAAAA,QAAQ,EAAE;AADD,GArBwB;AAwBrCC,EAAAA,KAAK,EAAE;AACHJ,IAAAA,eAAe,EAAE5B,IAAI,CAACiC,IADnB;AAEH,eAAW;AACPL,MAAAA,eAAe,EAAE3B,IAAI,CAAC,EAAD;AADd;AAFR,GAxB8B;AA8BrCiC,EAAAA,OAAO,EAAE;AACLN,IAAAA,eAAe,EAAE5B,IAAI,CAACiC,IADjB;AAEL,eAAW;AACPL,MAAAA,eAAe,EAAE3B,IAAI,CAAC,EAAD;AADd;AAFN,GA9B4B;AAoCrCkC,EAAAA,SAAS,EAAE;AACPP,IAAAA,eAAe,EAAE5B,IAAI,CAACiC,IADf;AAEP,eAAW;AACPL,MAAAA,eAAe,EAAE3B,IAAI,CAAC,EAAD;AADd;AAFJ;AApC0B,CAAZ,CAAD,CAA5B;AA4CA,MAAMmC,UAAU,gBAAG9D,KAAK,CAAC+D,UAAN,MAAiB,SAASD,UAAT,CAAoBE,KAApB,EAA2BC,GAA3B,EAAgC;AAChE,sBAAO,QAAC,KAAD;AAAO,IAAA,SAAS,EAAC,IAAjB;AAAsB,IAAA,GAAG,EAAEA,GAA3B;AAAA,OAAoCD;AAApC;AAAA;AAAA;AAAA;AAAA,UAAP;AACH,CAFkB,CAAnB;MAAMF,U;;AAIN,SAASI,UAAT,GAAsB;AAAA;;AAClB,QAAM;AAAEC,IAAAA,GAAF;AAAOC,IAAAA;AAAP,MAAejE,SAAS,EAA9B;AACA,QAAM,CAACkE,OAAD,EAAUC,UAAV,IAAwBrE,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACsE,UAAD,EAAaC,aAAb,IAA8BvE,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACwE,IAAD,EAAOC,OAAP,IAAkBzE,QAAQ,CAAC,KAAD,CAAhC;AACA,QAAM,CAAC0E,KAAD,EAAQC,QAAR,IAAoB3E,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAAC4E,OAAD,EAAUC,UAAV,IAAwB9E,KAAK,CAACC,QAAN,CAAe,IAAf,CAA9B;AACA,QAAM8E,OAAO,GAAGlC,SAAS,EAAzB;AACA,QAAM,CAACmC,WAAD,EAAcC,cAAd,IAAgChF,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACiF,IAAD,EAAOC,OAAP,IAAkBnF,KAAK,CAACC,QAAN,CAAe,CAAf,CAAxB;AACA,QAAM,CAACmF,KAAD,EAAQC,QAAR,IAAoBrF,KAAK,CAACC,QAAN,CAAe,CAAf,CAA1B;AACA,QAAM,CAACqF,UAAD,EAAaC,aAAb,IAA8BtF,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAM,CAACuF,QAAD,EAAWC,WAAX,IAA0BxF,QAAQ,CAAC,IAAD,CAAxC;AACA,QAAM,CAACyD,KAAD,EAAQgC,QAAR,IAAoBzF,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAAC0F,aAAD,EAAgBC,gBAAhB,IAAoC3F,QAAQ,CAAC,CAAD,CAAlD;AACA,QAAM,CAAC4F,aAAD,EAAgBC,gBAAhB,IAAoC7F,QAAQ,CAAC,CAAD,CAAlD;AACA,QAAM,CAAC8F,OAAD,EAAUC,UAAV,IAAwB/F,QAAQ,CAAC,EAAD,CAAtC;AAEA,QAAMgG,OAAO,GAAG,8BAAhB;AAEA,MAAIC,OAAO,GAAG,IAAIC,IAAJ,EAAd;AAEA,MAAIC,IAAI,GAAG,CAAC,MAAMF,OAAO,CAACG,OAAR,EAAP,EAA0BC,KAA1B,CAAgC,CAAC,CAAjC,CAAX,CAtBkB,CAwBlB;;AACA,MAAIC,KAAK,GAAG,CAAC,OAAOL,OAAO,CAACM,QAAR,KAAqB,CAA5B,CAAD,EAAiCF,KAAjC,CAAuC,CAAC,CAAxC,CAAZ,CAzBkB,CA2BlB;;AACA,MAAIG,IAAI,GAAGP,OAAO,CAACQ,WAAR,EAAX;AAEA,MAAIC,MAAM,GAAGT,OAAO,CAACU,QAAR,KAAqB,GAArB,GAA2BV,OAAO,CAACW,UAAR,EAAxC;AAEA,QAAMC,MAAM,GAAG;AACXC,IAAAA,OAAO,EAAE;AACL,sBAAgB,kBADX;AAELC,MAAAA,aAAa,EAAG,UAASC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAkC;AAFtD;AADE,GAAf;;AAOA,WAASC,UAAT,CAAoB9C,OAApB,EAA6B+C,MAA7B,EAAqC;AACjC9C,IAAAA,UAAU,CAACD,OAAD,CAAV;AACAG,IAAAA,aAAa,CAAC4C,MAAD,CAAb;AACAC,IAAAA,SAAS,CAACD,MAAD,CAAT;AACAtC,IAAAA,UAAU,CAAC,KAAD,CAAV;AACAO,IAAAA,QAAQ,CAAC,CAAD,CAAR;AACAF,IAAAA,OAAO,CAAC,CAAD,CAAP;AACH;;AAED,iBAAemC,aAAf,GAA+B;AAC3B,QAAI;AACA,YAAMC,QAAQ,GAAG,MAAMvG,KAAK,CAACwG,GAAN,CAClB,mDAAkDpD,GAAI,EADpC,EAEnB0C,MAFmB,CAAvB;AAIA,UAAIM,MAAM,GAAG;AAAE,iBAAS,EAAX;AAAe,gBAAQ;AAAvB,OAAb;AACAG,MAAAA,QAAQ,CAACE,IAAT,CAAcpD,OAAd,CAAsBqD,OAAtB,CAA8BC,MAAM,IAAI;AACpCP,QAAAA,MAAM,CAACO,MAAM,CAACC,IAAR,CAAN,GAAsB,EAAtB;AACH,OAFD;AAGAT,MAAAA,UAAU,CAACI,QAAQ,CAACE,IAAT,CAAcpD,OAAf,EAAwB+C,MAAxB,CAAV;AAGH,KAZD,CAYE,OAAOzC,KAAP,EAAc;AACZkD,MAAAA,UAAU,CAAC,MAAM;AACbA,QAAAA,UAAU,CAAC,MAAM;AACbnD,UAAAA,OAAO,CAAC,KAAD,CAAP;AACAE,UAAAA,QAAQ,CAAC,EAAD,CAAR;AACH,SAHS,EAGP,IAHO,CAAV;AAIH,OALS,EAKP,IALO,CAAV;AAMAF,MAAAA,OAAO,CAAC,IAAD,CAAP;AACA,aAAOE,QAAQ,CAAC,wBAAD,CAAf;AACH;AACJ;;AAED1E,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAI4H,SAAS,GAAG,KAAhB;AACAR,IAAAA,aAAa;AACb,WAAO,MAAM;AAAEQ,MAAAA,SAAS,GAAG,IAAZ;AAAmB,KAAlC;AACH,GAJQ,EAIN,EAJM,CAAT;;AAMA,QAAMT,SAAS,GAAID,MAAD,IAAY;AAC1B7B,IAAAA,aAAa,CAAC,KAAD,CAAb;AACA,QAAIwC,KAAK,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBb,MAAlB,CAAZ;AACAW,IAAAA,KAAK,CAACG,KAAN,GAAczB,IAAI,GAAG,GAAP,GAAaF,KAAb,GAAqB,GAArB,GAA2BH,IAAzC;AACA2B,IAAAA,KAAK,CAACI,IAAN,GAAa,OAAb;AACAJ,IAAAA,KAAK,CAACK,EAAN,GAAWrH,MAAM,EAAjB;AACAkE,IAAAA,cAAc,CAAC,CAAC8C,KAAD,CAAD,CAAd;AACH,GAPD;;AASA,QAAMM,gBAAgB,GAAG,CAACC,KAAD,EAAQC,KAAR,KAAkB;AACvCpD,IAAAA,OAAO,CAACoD,KAAD,CAAP;AACH,GAFD;;AAIA,QAAMC,oBAAoB,GAAG,CAACC,CAAD,EAAIF,KAAJ,KAAc;AACvCE,IAAAA,CAAC,CAACC,cAAF;AAEA,QAAIC,OAAO,GAAGX,MAAM,CAACY,IAAP,CAAY7C,OAAO,CAAC,CAAD,CAAnB,CAAd;AACA,QAAI8C,QAAQ,GAAG,EAAf;;AAEA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGzE,OAAO,CAAC0E,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACrCD,MAAAA,QAAQ,CAACG,IAAT,CAAc3E,OAAO,CAACyE,CAAD,CAAP,CAAWlB,IAAzB;AACH;;AACD,QAAIqB,UAAU,GAAG,IAAjB;;AAEA,SAAK,IAAIH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,OAAO,CAACI,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACrC,UAAI,CAACH,OAAO,CAACO,QAAR,CAAiBL,QAAQ,CAACC,CAAD,CAAzB,CAAL,EAAoC;AAChCG,QAAAA,UAAU,GAAG,KAAb;AACH;AAEJ;;AAED,QAAIA,UAAJ,EAAgB;AACZ,UAAIxB,IAAI,GAAG;AACP,qBAAarD,GADN;AAEP,qBAAaD,GAFN;AAGP,kBAAU;AAHH,OAAX;;AAMA,WAAK,IAAI2E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG/C,OAAO,CAACgD,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACrC,YAAIK,OAAO,GAAG,EAAd;AACAA,QAAAA,OAAO,CAACC,SAAR,GAAoB3C,IAAI,GAAG,GAAP,GAAaF,KAAb,GAAqB,GAArB,GAA2BH,IAA3B,GAAkC,GAAlC,GAAwCO,MAA5D;AACAwC,QAAAA,OAAO,CAACE,MAAR,GAAiBtD,OAAO,CAAC+C,CAAD,CAAxB;AACArB,QAAAA,IAAI,CAAC4B,MAAL,CAAYL,IAAZ,CAAiBG,OAAjB;AACH;;AAED,UAAI;AACAvH,QAAAA,OAAO,CAAC6F,IAAD,CAAP,CAAc6B,IAAd,CAAmB,MAAM;AACrB5E,UAAAA,OAAO,CAAC,IAAD,CAAP;AACA2C,UAAAA,SAAS,CAAC9C,UAAD,CAAT;AACH,SAHD;AAIH,OALD,CAKE,OAAOI,KAAP,EAAc;AACZkD,QAAAA,UAAU,CAAC,MAAM;AACbA,UAAAA,UAAU,CAAC,MAAM;AACbnD,YAAAA,OAAO,CAAC,KAAD,CAAP;AACAE,YAAAA,QAAQ,CAAC,EAAD,CAAR;AACH,WAHS,EAGP,IAHO,CAAV;AAIH,SALS,EAKP,IALO,CAAV;AAMAF,QAAAA,OAAO,CAAC,IAAD,CAAP;AACA,eAAOE,QAAQ,CAAC,wBAAD,CAAf;AACH;AACJ,KA7BD,MA6BO;AACH2E,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACH;AAKJ,GAtDD;;AAyDA,QAAMC,UAAU,GAAG,YAAY;AAE3B,WAAO,IAAIC,OAAJ,CAAYC,OAAO,IAAI;AAC1B,UAAIlC,IAAI,GAAG;AACP,qBAAarD,GADN;AAEP,qBAAaD,GAFN;AAGP,kBAAU;AAHH,OAAX;;AAMA,YAAMyF,WAAW,GAAG,MAAMC,CAAN,IAAW;AAC3B,aAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG9E,WAAW,CAAC+D,MAAxC,EAAgDe,KAAK,EAArD,EAAyD;AACrD,cAAIX,OAAO,GAAG,EAAd;AACAA,UAAAA,OAAO,CAACC,SAAR,GAAoBpE,WAAW,CAAC8E,KAAD,CAAX,CAAmB5B,KAAnB,GAA2B,GAA3B,GAAiClD,WAAW,CAAC8E,KAAD,CAAX,CAAmB3B,IAAxE;AACAgB,UAAAA,OAAO,CAACE,MAAR,GAAiB,EAAjB;;AAGA,eAAK,IAAIU,OAAO,GAAG,CAAnB,EAAsBA,OAAO,GAAG1F,OAAO,CAAC0E,MAAxC,EAAgDgB,OAAO,EAAvD,EAA2D;AACvD,gBAAI1F,OAAO,CAAC0F,OAAD,CAAP,CAAiBC,IAAjB,KAA0B,OAA1B,IAAqChF,WAAW,CAAC8E,KAAD,CAAX,CAAmBzF,OAAO,CAAC0F,OAAD,CAAP,CAAiBnC,IAApC,MAA8C,EAAvF,EAA2F;AACvFuB,cAAAA,OAAO,CAACE,MAAR,CAAehF,OAAO,CAAC0F,OAAD,CAAP,CAAiBnC,IAAhC,IAAwC5C,WAAW,CAAC8E,KAAD,CAAX,CAAmBzF,OAAO,CAAC0F,OAAD,CAAP,CAAiBnC,IAApC,CAAxC;AACH,aAFD,MAEO;AAEH,kBAAIqC,IAAI,GAAGjF,WAAW,CAAC8E,KAAD,CAAX,CAAmBzF,OAAO,CAAC0F,OAAD,CAAP,CAAiBnC,IAApC,CAAX;AAEAuB,cAAAA,OAAO,CAACE,MAAR,CAAehF,OAAO,CAAC0F,OAAD,CAAP,CAAiBnC,IAAhC,IAAwC,MAAMlF,SAAS,CAACuH,IAAD,CAAvD;AACH;AACJ;;AAEDxC,UAAAA,IAAI,CAAC4B,MAAL,CAAYL,IAAZ,CAAiBG,OAAjB;AACH;AACJ,OApBD;;AAqBAS,MAAAA,WAAW,GAAGN,IAAd,CAAmB,MAAM;AACrBK,QAAAA,OAAO,CAAClC,IAAD,CAAP;AACH,OAFD;AAIH,KAhCM,CAAP;AAiCH,GAnCD;;AAqCA,QAAMyC,YAAY,GAAG,MAAOzB,CAAP,IAAa;AAC9BA,IAAAA,CAAC,CAACC,cAAF;AAEA,QAAIjB,IAAI,GAAG,MAAMgC,UAAU,EAA3B;;AAEA,QAAI;AACA7H,MAAAA,OAAO,CAAC6F,IAAD,CAAP,CAAc6B,IAAd,CAAmB,MAAM;AACrB5E,QAAAA,OAAO,CAAC,IAAD,CAAP;AACA2C,QAAAA,SAAS,CAAC9C,UAAD,CAAT;AACH,OAHD;AAIH,KALD,CAKE,OAAOI,KAAP,EAAc;AACZkD,MAAAA,UAAU,CAAC,MAAM;AACbA,QAAAA,UAAU,CAAC,MAAM;AACbnD,UAAAA,OAAO,CAAC,KAAD,CAAP;AACAE,UAAAA,QAAQ,CAAC,EAAD,CAAR;AACH,SAHS,EAGP,IAHO,CAAV;AAIH,OALS,EAKP,IALO,CAAV;AAMAF,MAAAA,OAAO,CAAC,IAAD,CAAP;AACA,aAAOE,QAAQ,CAAC,wBAAD,CAAf;AACH;AAEJ,GArBD;;AAuBA,QAAMuF,iBAAiB,GAAG,CAAC/B,EAAD,EAAKE,KAAL,KAAe;AACrC,UAAM8B,cAAc,GAAGpF,WAAW,CAACqF,GAAZ,CAAgBvB,CAAC,IAAI;AACxC,UAAIV,EAAE,KAAKU,CAAC,CAACV,EAAb,EAAiB;AACbU,QAAAA,CAAC,CAACR,KAAK,CAACgC,MAAN,CAAa1C,IAAd,CAAD,GAAuBU,KAAK,CAACgC,MAAN,CAAa/B,KAApC;AACH;;AACD,aAAOO,CAAP;AACH,KALsB,CAAvB;AAMAS,IAAAA,OAAO,CAACC,GAAR,CAAYY,cAAZ;AACAnF,IAAAA,cAAc,CAACmF,cAAD,CAAd;AACH,GATD;;AAWA,QAAMG,sBAAsB,GAAG,CAACnC,EAAD,EAAKE,KAAL,KAAe;AAC1C,UAAM8B,cAAc,GAAGpF,WAAW,CAACqF,GAAZ,CAAgBvB,CAAC,IAAI;AACxC,UAAIV,EAAE,KAAKU,CAAC,CAACV,EAAb,EAAiB;AAEbU,QAAAA,CAAC,CAACR,KAAK,CAACgC,MAAN,CAAa1C,IAAd,CAAD,GAAuBU,KAAK,CAACgC,MAAN,CAAaE,KAAb,CAAmB,CAAnB,CAAvB;AACH;;AACD,aAAO1B,CAAP;AACH,KANsB,CAAvB;AAOA7D,IAAAA,cAAc,CAACmF,cAAD,CAAd;AACH,GATD;;AAWA,QAAMK,eAAe,GAAG,MAAM;AAG1B,QAAIC,SAAS,GAAG1C,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1D,UAAlB,CAAhB;AACAmG,IAAAA,SAAS,CAACxC,KAAV,GAAkBzB,IAAI,GAAG,GAAP,GAAaF,KAAb,GAAqB,GAArB,GAA2BH,IAA7C;AACAsE,IAAAA,SAAS,CAACvC,IAAV,GAAiB,OAAjB;AACAuC,IAAAA,SAAS,CAACtC,EAAV,GAAerH,MAAM,EAArB,CAN0B,CAMD;;AAEzBkE,IAAAA,cAAc,CAAC,CAAC,GAAGD,WAAJ,EAAiB0F,SAAjB,CAAD,CAAd;AAEA,QAAIC,GAAG,GAAG3F,WAAW,CAAC+D,MAAZ,GAAqB,CAA/B;AACA,QAAI6B,MAAM,GAAGD,GAAG,GAAG,CAAN,KAAY,CAAZ,GAAgBE,QAAQ,CAACF,GAAG,GAAG,CAAP,CAAxB,GAAoC,IAAIE,QAAQ,CAACF,GAAG,GAAG,CAAP,CAA7D;;AACA,QAAIC,MAAM,GAAGxF,KAAb,EAAoB;AAChBC,MAAAA,QAAQ,CAACuF,MAAD,CAAR;AACH;;AACD,QAAI1F,IAAI,GAAG0F,MAAX,EAAmB;AACfzF,MAAAA,OAAO,CAACyF,MAAD,CAAP;AACH;AACJ,GAlBD;;AAoBA,QAAME,kBAAkB,GAAG1C,EAAE,IAAI;AAC7B,UAAMiB,MAAM,GAAG,CAAC,GAAGrE,WAAJ,CAAf;AACAqE,IAAAA,MAAM,CAAC0B,MAAP,CAAc1B,MAAM,CAAC2B,SAAP,CAAiBzC,KAAK,IAAIA,KAAK,CAACH,EAAN,KAAaA,EAAvC,CAAd,EAA0D,CAA1D;AACAnD,IAAAA,cAAc,CAACoE,MAAD,CAAd;AAEA,QAAIsB,GAAG,GAAG3F,WAAW,CAAC+D,MAAZ,GAAqB,CAA/B;AACA,QAAI6B,MAAM,GAAGD,GAAG,GAAG,CAAN,KAAY,CAAZ,GAAgBE,QAAQ,CAACF,GAAG,GAAG,CAAP,CAAxB,GAAoC,IAAIE,QAAQ,CAACF,GAAG,GAAG,CAAP,CAA7D;;AACA,QAAIC,MAAM,GAAGxF,KAAb,EAAoB;AAChBC,MAAAA,QAAQ,CAACuF,MAAD,CAAR;AACAzF,MAAAA,OAAO,CAACyF,MAAD,CAAP;AACH;AACJ,GAXD;;AAaA,QAAMK,WAAW,GAAG,CAAC7C,EAAD,EAAK8C,UAAL,KAAoB;AACpC,UAAMd,cAAc,GAAGpF,WAAW,CAACqF,GAAZ,CAAgBvB,CAAC,IAAI;AACxC,UAAIV,EAAE,KAAKU,CAAC,CAACV,EAAb,EAAiB;AAEbU,QAAAA,CAAC,CAACoC,UAAD,CAAD,GAAgB,EAAhB;AACH;;AACD,aAAOpC,CAAP;AACH,KANsB,CAAvB;AAOA7D,IAAAA,cAAc,CAACmF,cAAD,CAAd;AACH,GATD;;AAWA,QAAMe,WAAW,GAAG,CAACC,MAAD,EAAShD,EAAT,EAAa8C,UAAb,EAAyB5C,KAAzB,KAAmC;AACnD1C,IAAAA,gBAAgB,CAAC0C,KAAK,CAAC+C,OAAN,GAAgB,GAAjB,CAAhB;AACAvF,IAAAA,gBAAgB,CAACwC,KAAK,CAACgD,OAAN,GAAgB,GAAjB,CAAhB;AACA,QAAIC,QAAQ,GAAG,EAAf;;AAGA,QAAIH,MAAM,KAAK,EAAf,EAAmB;AAEfpG,MAAAA,WAAW,CAACwG,KAAZ,CAAkBC,KAAK,IAAI;AAEvB,YAAIA,KAAK,CAACrD,EAAN,KAAaA,EAAjB,EAAqB;AACjBmD,UAAAA,QAAQ,GAAGG,GAAG,CAACC,eAAJ,CAAoBF,KAAK,CAACP,UAAD,CAAzB,CAAX;AACA,iBAAO,KAAP;AACH;;AACD,eAAO,IAAP;AACH,OAPD;AAQH;;AAEDzF,IAAAA,WAAW,CAAC2F,MAAD,CAAX;AACA1F,IAAAA,QAAQ,CAAC6F,QAAD,CAAR;AACH,GApBD;;AAsBA,sBACI,QAAC,SAAD;AAAA,4BACI,QAAC,UAAD;AACI,MAAA,KAAK,EAAC,0BADV;AAEI,MAAA,QAAQ,EAAC,2DAFb;AAGI,MAAA,IAAI,eAAE,QAAC,QAAD;AAAU,QAAA,QAAQ,EAAC;AAAnB;AAAA;AAAA;AAAA;AAAA;AAHV;AAAA;AAAA;AAAA;AAAA,YADJ,eAOI;AAAK,MAAA,SAAS,EAAExG,OAAO,CAAC6G,aAAxB;AAAuC,MAAA,MAAM,EAAE,CAAC/G,OAAhD;AAAA,8BACI,QAAC,IAAD;AACI,QAAA,EAAE,EAAEA,OADR;AAEI,QAAA,KAAK,EAAE;AACHgH,UAAAA,eAAe,EAAE;AADd,SAFX;AAKI,QAAA,aAAa,MALjB;AAAA,+BAOI,QAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAPJ;AAAA;AAAA;AAAA;AAAA,cADJ,eAUI;AAAA;AAAA;AAAA;AAAA,cAVJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAPJ,eAmBI,QAAC,GAAD;AACI,MAAA,EAAE,EAAE;AACAC,QAAAA,OAAO,EAAE,MADT;AAEAC,QAAAA,cAAc,EAAE;AAFhB,OADR;AAAA,6BAMI,QAAC,UAAD;AACI,QAAA,EAAE,EAAE;AAAEC,UAAAA,EAAE,EAAE;AAAN,SADR;AAEI,QAAA,IAAI,EAAC,OAFT;AAGI,QAAA,OAAO,EAAC,UAHZ;AAII,QAAA,KAAK,EAAC,UAJV;AAKI,QAAA,KAAK,EAAE5G,KALX;AAMI,QAAA,YAAY,EAAE,CANlB;AAOI,QAAA,aAAa,EAAE,CAPnB;AAQI,QAAA,IAAI,EAAEF,IARV;AASI,QAAA,QAAQ,EAAEmD;AATd;AAAA;AAAA;AAAA;AAAA;AANJ;AAAA;AAAA;AAAA;AAAA,YAnBJ,eAqCI,QAAC,QAAD;AAAU,MAAA,EAAE,EAAE5D,IAAd;AAAA,6BACI,QAAC,KAAD;AACI,QAAA,QAAQ,EAAEE,KAAK,GAAG,OAAH,GAAa,SADhC;AAEI,QAAA,MAAM,eACF,QAAC,UAAD;AACI,wBAAW,OADf;AAEI,UAAA,KAAK,EAAC,SAFV;AAGI,UAAA,IAAI,EAAC,OAHT;AAII,UAAA,OAAO,EAAE,MAAM;AACXD,YAAAA,OAAO,CAAC,KAAD,CAAP;AACH,WANL;AAAA,iCAQI,QAAC,SAAD;AAAW,YAAA,QAAQ,EAAC;AAApB;AAAA;AAAA;AAAA;AAAA;AARJ;AAAA;AAAA;AAAA;AAAA,gBAHR;AAAA,kBAeKC,KAAK,GAAGA,KAAH,GAAWsB;AAfrB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YArCJ,eAwDI;AAAM,MAAA,SAAS,EAAElB,OAAO,CAAChC,IAAzB;AAA+B,MAAA,QAAQ,EAAEmH,YAAzC;AAAA,8BACI,QAAC,MAAD;AACI,QAAA,IAAI,EAAE5E,UADV;AAEI,QAAA,mBAAmB,EAAExB,UAFzB;AAGI,QAAA,WAAW,MAHf;AAII,QAAA,OAAO,EAAE,MAAMyB,aAAa,CAAC,KAAD,CAJhC;AAKI,2BAAgB,0BALpB;AAMI,4BAAiB,gCANrB;AAAA,gCAQI,QAAC,WAAD;AAAa,UAAA,EAAE,EAAC,0BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBARJ,eASI,QAAC,aAAD;AAAA,kCACI,QAAC,MAAD;AAAQ,YAAA,OAAO,EAAE,MAAMA,aAAa,CAAC,KAAD,CAApC;AAA6C,YAAA,KAAK,EAAC,UAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAII,QAAC,MAAD;AAAQ,YAAA,IAAI,EAAC,QAAb;AAAsB,YAAA,OAAO,EAAE2E,YAA/B;AAA6C,YAAA,KAAK,EAAC,SAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBATJ;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAmBI,QAAC,GAAD;AACI,QAAA,EAAE,EAAE;AACA4B,UAAAA,OAAO,EAAE,MADT;AAEAC,UAAAA,cAAc,EAAE,YAFhB;AAGAE,UAAAA,EAAE,EAAE;AAHJ,SADR;AAAA,gCAOI;AAAA,kCACI,QAAC,GAAD;AAAK,YAAA,EAAE,EAAE;AACLH,cAAAA,OAAO,EAAE,MADJ;AAELC,cAAAA,cAAc,EAAE;AAFX,aAAT;AAAA,mCAII,QAAC,UAAD;AACI,cAAA,EAAE,EAAE;AACAG,gBAAAA,CAAC,EAAE,KADH;AAEAC,gBAAAA,EAAE,EAAE,KAFJ;AAGAC,gBAAAA,EAAE,EAAE,MAHJ;AAIAC,gBAAAA,KAAK,EAAE,MAJP;AAKAC,gBAAAA,YAAY,EAAE;AALd,eADR;AAQI,cAAA,KAAK,EAAC,QARV;AASI,cAAA,OAAO,EAAC,WATZ;AAUI,cAAA,SAAS,EAAC,KAVd;AAWI,cAAA,MAAM,EAAEjI,OAAO,CAAC0E,MAAR,KAAmB,CAX/B;AAYI,cAAA,SAAS,EAAEhE,OAAO,CAAC7B,KAZvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJJ;AAAA;AAAA;AAAA;AAAA,kBADJ,eAqBI,QAAC,GAAD;AAAK,YAAA,EAAE,EAAE;AACL4I,cAAAA,OAAO,EAAE,MADJ;AAELC,cAAAA,cAAc,EAAE;AAFX,aAAT;AAAA,mCAII,QAAC,UAAD;AACI,cAAA,EAAE,EAAE;AACAG,gBAAAA,CAAC,EAAE,KADH;AAEAC,gBAAAA,EAAE,EAAE,KAFJ;AAGAC,gBAAAA,EAAE,EAAE,MAHJ;AAIAC,gBAAAA,KAAK,EAAE,MAJP;AAKAC,gBAAAA,YAAY,EAAE;AALd,eADR;AAQI,cAAA,KAAK,EAAC,QARV;AASI,cAAA,OAAO,EAAC,WATZ;AAUI,cAAA,SAAS,EAAC,KAVd;AAWI,cAAA,MAAM,EAAEjI,OAAO,CAAC0E,MAAR,KAAmB,CAX/B;AAYI,cAAA,SAAS,EAAEhE,OAAO,CAAC7B,KAZvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJJ;AAAA;AAAA;AAAA;AAAA,kBArBJ,EAyCKmB,OAAO,CAACgG,GAAR,CAAY1C,MAAM,iBACf,QAAC,GAAD;AAAK,YAAA,EAAE,EAAE;AACLmE,cAAAA,OAAO,EAAE,MADJ;AAELC,cAAAA,cAAc,EAAE;AAFX,aAAT;AAAA,mCAII,QAAC,UAAD;AACI,cAAA,EAAE,EAAE;AACAG,gBAAAA,CAAC,EAAE,KADH;AAEAC,gBAAAA,EAAE,EAAE,KAFJ;AAGAC,gBAAAA,EAAE,EAAE,MAHJ;AAIAC,gBAAAA,KAAK,EAAE,MAJP;AAKAC,gBAAAA,YAAY,EAAE;AALd,eADR;AAQI,cAAA,KAAK,EAAC,QARV;AASI,cAAA,OAAO,EAAC,WATZ;AAUI,cAAA,SAAS,EAAC,KAVd;AAWI,cAAA,SAAS,EAAEvH,OAAO,CAAC7B,KAXvB;AAAA,wBAYKyE,MAAM,CAACC;AAZZ;AAAA;AAAA;AAAA;AAAA;AAJJ;AAAA;AAAA;AAAA;AAAA,kBADH,CAzCL;AAAA;AAAA;AAAA;AAAA;AAAA,gBAPJ,EAsEK5C,WAAW,CAACqF,GAAZ,CAAgB,CAACkC,UAAD,EAAazC,KAAb,KACb,IAAI5E,IAAJ,GAAW4E,KAAX,IAAoB,CAApB,IAAyB,IAAI5E,IAAJ,GAAW4E,KAAX,IAAoB,CAA7C,iBACA;AAAA,kCACI,QAAC,GAAD;AAAK,YAAA,EAAE,EAAE;AACLgC,cAAAA,OAAO,EAAE,MADJ;AAELC,cAAAA,cAAc,EAAE;AAFX,aAAT;AAAA,mCAII,QAAC,SAAD;AACI,cAAA,IAAI,EAAC,MADT;AAEI,cAAA,IAAI,EAAC,OAFT;AAGI,cAAA,KAAK,EAAE;AAAEM,gBAAAA,KAAK,EAAE;AAAT,eAHX;AAII,cAAA,YAAY,EAAE5F,IAAI,GAAG,GAAP,GAAaF,KAAb,GAAqB,GAArB,GAA2BH,IAJ7C;AAKI,cAAA,OAAO,EAAC,UALZ;AAMI,cAAA,IAAI,EAAC,OANT;AAOI,cAAA,KAAK,EAAEmG,UAAU,CAACrE,KAPtB;AAQI,cAAA,QAAQ,EAAEI,KAAK,IAAI6B,iBAAiB,CAACoC,UAAU,CAACnE,EAAZ,EAAgBE,KAAhB;AARxC;AAAA;AAAA;AAAA;AAAA;AAJJ;AAAA;AAAA;AAAA;AAAA,kBADJ,eAgBI,QAAC,GAAD;AAAK,YAAA,EAAE,EAAE;AACLwD,cAAAA,OAAO,EAAE,MADJ;AAELC,cAAAA,cAAc,EAAE;AAFX,aAAT;AAAA,mCAII,QAAC,SAAD;AACI,cAAA,KAAK,EAAE;AAAEM,gBAAAA,KAAK,EAAE;AAAT,eADX;AAEI,cAAA,IAAI,EAAC,MAFT;AAGI,cAAA,IAAI,EAAC,MAHT;AAII,cAAA,YAAY,EAAE,OAJlB;AAKI,cAAA,IAAI,EAAC,OALT;AAMI,cAAA,OAAO,EAAC,UANZ;AAOI,cAAA,KAAK,EAAEE,UAAU,CAACpE,IAPtB;AAQI,cAAA,QAAQ,EAAEG,KAAK,IAAI6B,iBAAiB,CAACoC,UAAU,CAACnE,EAAZ,EAAgBE,KAAhB;AARxC;AAAA;AAAA;AAAA;AAAA;AAJJ;AAAA;AAAA;AAAA;AAAA,kBAhBJ,EA+BKjE,OAAO,CAACgG,GAAR,CAAY1C,MAAM,iBACf,QAAC,GAAD;AAAK,YAAA,EAAE,EAAE;AACLmE,cAAAA,OAAO,EAAE,MADJ;AAELC,cAAAA,cAAc,EAAE;AAFX,aAAT;AAAA,sBAIKpE,MAAM,CAACqC,IAAP,KAAgB,OAAhB,gBACK,QAAC,SAAD;AACE,cAAA,IAAI,EAAC,QADP;AAEE,cAAA,IAAI,EAAErC,MAAM,CAACC,IAFf;AAGE,cAAA,KAAK,EAAC,EAHR;AAIE,cAAA,IAAI,EAAC,OAJP;AAKE,cAAA,OAAO,EAAC,UALV;AAME,cAAA,KAAK,EAAE2E,UAAU,CAAC5E,MAAM,CAACC,IAAR,CANnB;AAOE,cAAA,QAAQ,EAAEU,KAAK,IAAI6B,iBAAiB,CAACoC,UAAU,CAACnE,EAAZ,EAAgBE,KAAhB;AAPtC;AAAA;AAAA;AAAA;AAAA,oBADL,GAUKtD,WAAW,CAAC8E,KAAD,CAAX,CAAmBnC,MAAM,CAACC,IAA1B,MAAoC,EAApC,gBACI,QAAC,OAAD;AAAS,cAAA,KAAK,EAAC,cAAf;AAAA,qCACE,QAAC,MAAD;AACI,gBAAA,KAAK,EAAE;AACH5E,kBAAAA,MAAM,EAAE,KADL;AAEHqJ,kBAAAA,KAAK,EAAE,MAFJ;AAGHG,kBAAAA,UAAU,EAAE,KAHT;AAIHC,kBAAAA,aAAa,EAAE,KAJZ;AAKHC,kBAAAA,WAAW,EAAE,MALV;AAMHC,kBAAAA,YAAY,EAAE;AANX,iBADX;AASI,gBAAA,OAAO,EAAC,WATZ;AAUI,gBAAA,SAAS,EAAC,OAVd;AAWI,gBAAA,SAAS,EAAE5H,OAAO,CAACrB,KAXvB;AAAA,wCAaI,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,wBAbJ,eAcI;AACI,kBAAA,IAAI,EAAEiE,MAAM,CAACC,IADjB;AAEI,kBAAA,MAAM,EAAC,SAFX;AAGI,kBAAA,EAAE,EAAC,oBAHP;AAII,kBAAA,IAAI,EAAC,MAJT;AAKI,kBAAA,MAAM,MALV;AAMI,kBAAA,QAAQ,EAAEU,KAAK,IAAIiC,sBAAsB,CAACgC,UAAU,CAACnE,EAAZ,EAAgBE,KAAhB;AAN7C;AAAA;AAAA;AAAA;AAAA,wBAdJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBADJ,gBA0BI;AAAA,sCACE,QAAC,OAAD;AAAS,gBAAA,KAAK,EAAC,cAAf;AAAA,uCACI,QAAC,MAAD;AACI,kBAAA,KAAK,EAAE;AACHtF,oBAAAA,MAAM,EAAE,KADL;AAEHqJ,oBAAAA,KAAK,EAAE,KAFJ;AAGHG,oBAAAA,UAAU,EAAE,KAHT;AAIHC,oBAAAA,aAAa,EAAE,KAJZ;AAKHC,oBAAAA,WAAW,EAAE,MALV;AAMHC,oBAAAA,YAAY,EAAE;AANX,mBADX;AASI,kBAAA,OAAO,EAAC,WATZ;AAUI,kBAAA,YAAY,EAAGrE,KAAD,IAAW6C,WAAW,CAAC,KAAD,EAAQoB,UAAU,CAACnE,EAAnB,EAAuBT,MAAM,CAACC,IAA9B,EAAoCU,KAApC,CAVxC;AAWI,kBAAA,YAAY,EAAGA,KAAD,IAAW6C,WAAW,CAAC,IAAD,EAAO,EAAP,EAAW,EAAX,EAAe7C,KAAf,CAXxC;AAYI,kBAAA,OAAO,EAAE,MAAMsE,MAAM,CAACnI,IAAP,CAAYf,KAAZ,CAZnB;AAaI,kBAAA,MAAM,EAAC,QAbX;AAcI,kBAAA,SAAS,EAAEqB,OAAO,CAACnB,OAdvB;AAAA,yCAgBI,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAhBJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,sBADF,eAqBE,QAAC,OAAD;AAAS,gBAAA,KAAK,EAAC,gBAAf;AAAA,uCACI,QAAC,MAAD;AACI,kBAAA,KAAK,EAAE;AACHZ,oBAAAA,MAAM,EAAE,KADL;AAEHqJ,oBAAAA,KAAK,EAAE,KAFJ;AAGHG,oBAAAA,UAAU,EAAE,KAHT;AAIHC,oBAAAA,aAAa,EAAE,KAJZ;AAKHC,oBAAAA,WAAW,EAAE,MALV;AAMHC,oBAAAA,YAAY,EAAE;AANX,mBADX;AASI,kBAAA,OAAO,EAAC,WATZ;AAUI,kBAAA,SAAS,EAAE5H,OAAO,CAAClB,SAVvB;AAWI,kBAAA,OAAO,EAAE,MAAMoH,WAAW,CAACsB,UAAU,CAACnE,EAAZ,EAAgBT,MAAM,CAACC,IAAvB,CAX9B;AAAA,yCAaI,QAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAbJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,sBArBF;AAAA;AAxCd;AAAA;AAAA;AAAA;AAAA,kBADH,CA/BL,eAkHI,QAAC,GAAD;AAAK,YAAA,EAAE,EAAE;AACLkE,cAAAA,OAAO,EAAE,MADJ;AAELC,cAAAA,cAAc,EAAE;AAFX,aAAT;AAAA,mCAKI,QAAC,OAAD;AAAS,cAAA,KAAK,EAAC,gBAAf;AAAA,qCACI,QAAC,UAAD;AAAY,gBAAA,QAAQ,EAAE/G,WAAW,CAAC+D,MAAZ,KAAuB,CAA7C;AAAgD,gBAAA,OAAO,EAAE,MAAM+B,kBAAkB,CAACyB,UAAU,CAACnE,EAAZ,CAAjF;AAAA,uCACI,QAAC,MAAD;AAAQ,kBAAA,SAAS,EAAErD,OAAO,CAACxB,MAA3B;AAAA,yCACI,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AALJ;AAAA;AAAA;AAAA;AAAA,kBAlHJ;AAAA,WAAUgJ,UAAU,CAACnE,EAArB;AAAA;AAAA;AAAA;AAAA,gBAFH,CAtEL,eAyMI,QAAC,GAAD;AAAK,UAAA,EAAE,EAAE;AACL0D,YAAAA,OAAO,EAAE,MADJ;AAELe,YAAAA,UAAU,EAAE;AAFP,WAAT;AAAA,iCAKI,QAAC,OAAD;AAAS,YAAA,KAAK,EAAC,yBAAf;AAAA,mCACI,QAAC,UAAD;AAAY,cAAA,KAAK,EAAE;AAAEpJ,gBAAAA,QAAQ,EAAE;AAAZ,eAAnB;AAA0C,cAAA,QAAQ,EAAEuB,WAAW,CAAC+D,MAAZ,KAAuB,CAA3E;AAA8E,cAAA,GAAG,MAAjF;AACI,cAAA,OAAO,EAAE0B,eADb;AAAA,qCAGI,QAAC,MAAD;AAAQ,gBAAA,SAAS,EAAE1F,OAAO,CAAC1B,GAA3B;AAAA,uCACI,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AAHJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AALJ;AAAA;AAAA;AAAA;AAAA,gBAzMJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAnBJ,eA8OI,QAAC,GAAD;AAAA,+BACI,QAAC,QAAD,CAAU,MAAV;AAAiB,UAAA,KAAK,EAAE;AAAEyJ,YAAAA,UAAU,EAAE;AAAd,WAAxB;AACI,UAAA,OAAO,EAAC,WADZ;AAEI,UAAA,KAAK,EAAC,SAFV;AAGI,UAAA,OAAO,EAAE,MAAMvH,aAAa,CAAC,IAAD,CAHhC;AAII,UAAA,IAAI,EAAC;AAJT;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cA9OJ,eAsPI;AAAA;AAAA;AAAA;AAAA,cAtPJ,eAuPI;AAAA;AAAA;AAAA;AAAA,cAvPJ,eAwPI;AAAA;AAAA;AAAA;AAAA,cAxPJ,eAyPI;AAAA;AAAA;AAAA;AAAA,cAzPJ,eA0PI,QAAC,UAAD;AACI,QAAA,KAAK,EAAE,mBADX;AAEI,QAAA,QAAQ,EAAE,6DAFd;AAGI,QAAA,IAAI,eAAE,QAAC,cAAD;AAAgB,UAAA,QAAQ,EAAC,OAAzB;AAAiC,UAAA,KAAK,EAAC;AAAvC;AAAA;AAAA;AAAA;AAAA;AAHV;AAAA;AAAA;AAAA;AAAA,cA1PJ,eAgQI,QAAC,GAAD;AAAK,QAAA,KAAK,EAAE;AAAE8G,UAAAA,KAAK,EAAE;AAAT,SAAZ;AAAA,gCAEI,QAAC,WAAD;AAAa,UAAA,UAAU,EAAErG;AAAzB;AAAA;AAAA;AAAA;AAAA,gBAFJ,eAGI,QAAC,QAAD,CAAU,MAAV;AACI,UAAA,IAAI,EAAC,cADT;AAEI,UAAA,KAAK,EAAC,SAFV;AAGI,UAAA,OAAO,EAAEwC;AAHb;AAAA;AAAA;AAAA;AAAA,gBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAhQJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAxDJ,eAkUI,QAAC,IAAD;AACI,MAAA,EAAE,EAAE;AACAuE,QAAAA,QAAQ,EAAE,GADV;AAEAC,QAAAA,SAAS,EAAE,GAFX;AAGAvJ,QAAAA,QAAQ,EAAE,UAHV;AAIAwJ,QAAAA,GAAG,EAAEpH,aAJL;AAKAqH,QAAAA,IAAI,EAAEvH;AALN,OADR;AAQI,MAAA,MAAM,EAAEH,QARZ;AAAA,6BAUI,QAAC,SAAD;AACI,QAAA,SAAS,EAAC,KADd;AAEI,QAAA,MAAM,EAAC,KAFX;AAGI,QAAA,KAAK,EAAE9B,KAHX;AAII,QAAA,GAAG,EAAC;AAJR;AAAA;AAAA;AAAA;AAAA;AAVJ;AAAA;AAAA;AAAA;AAAA,YAlUJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAsVH;;GA/nBQQ,U;UACgB/D,S,EAML0C,S;;;MAPXqB,U;AAioBT,eAAeA,UAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport Container from '@material-ui/core/Container';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Pagination from '@mui/material/Pagination';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport RemoveIcon from '@material-ui/icons/Remove';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Controls from \"../../components/controls/Controls\";\r\nimport { Link } from 'react-router-dom';\r\nimport UploadFile from '@mui/icons-material/UploadFile';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport axios from \"axios\";\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Fade from '@material-ui/core/Fade';\r\nimport Box from '@material-ui/core/Box';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport PageHeader from \"../../components/PageHeader\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport { green, red, grey, blue } from '@material-ui/core/colors';\r\nimport { addData } from \"../../services/dataService\";\r\nimport Tooltip from '@mui/material/Tooltip';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport Typography from '@mui/material/Typography';\r\nimport Card from '@mui/material/Card';\r\nimport CardMedia from '@mui/material/CardMedia';\r\nimport VisibilityIcon from '@mui/icons-material/Visibility';\r\nimport ClearIcon from '@mui/icons-material/Clear';\r\nimport FileUploadIcon from '@mui/icons-material/FileUpload';\r\nimport Collapse from '@mui/material/Collapse';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport { getBase64 } from '../../services/getFileService';\r\nimport Alert from '@mui/material/Alert';\r\n\r\nimport FileManager from '../../components/FileManager';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        '& .MuiTextField-root': {\r\n            margin: theme.spacing(1),\r\n        },\r\n        '& .Mui-disabled': {\r\n            color: \"#2f2c33\"\r\n        }\r\n    },\r\n    color: {\r\n        background: green[\"100\"]\r\n    },\r\n    button: {\r\n        margin: theme.spacing(1)\r\n    },\r\n    add: {\r\n        backgroundColor: green[600]\r\n    },\r\n    remove: {\r\n        backgroundColor: red[400]\r\n    },\r\n    buttonFixed: {\r\n        position: \"fixed\"\r\n    },\r\n    image: {\r\n        backgroundColor: grey.A100,\r\n        \"&:hover\": {\r\n            backgroundColor: blue[50]\r\n        }\r\n    },\r\n    showImg: {\r\n        backgroundColor: grey.A100,\r\n        \"&:hover\": {\r\n            backgroundColor: blue[50]\r\n        }\r\n    },\r\n    removeImg: {\r\n        backgroundColor: grey.A100,\r\n        \"&:hover\": {\r\n            backgroundColor: blue[50]\r\n        }\r\n    }\r\n}))\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nfunction CreateData() {\r\n    const { pid, bid } = useParams();\r\n    const [factors, setFactors] = useState([]);\r\n    const [factorsObj, setFactorsObj] = useState({});\r\n    const [open, setOpen] = useState(false);\r\n    const [error, setError] = useState(\"\");\r\n    const [loading, setLoading] = React.useState(true);\r\n    const classes = useStyles()\r\n    const [inputFields, setInputFields] = useState([]);\r\n    const [page, setPage] = React.useState(0);\r\n    const [count, setCount] = React.useState(0);\r\n    const [openDialog, setOpenDialog] = useState(false);\r\n    const [showCard, setShowCard] = useState(true);\r\n    const [image, setImage] = useState(\"\");\r\n    const [cardPositionX, setCardPositionX] = useState(0);\r\n    const [cardPositionY, setCardPositionY] = useState(0);\r\n    const [CSVData, setCSVData] = useState(\"\");\r\n\r\n    const message = \"Se han registrado los datos!\"\r\n\r\n    let date_ob = new Date();\r\n\r\n    let date = (\"0\" + date_ob.getDate()).slice(-2);\r\n\r\n    // current month\r\n    let month = (\"0\" + (date_ob.getMonth() + 1)).slice(-2);\r\n\r\n    // current year\r\n    let year = date_ob.getFullYear();\r\n\r\n    let t_time = date_ob.getHours() + \":\" + date_ob.getMinutes();\r\n\r\n    const config = {\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${localStorage.getItem(\"authToken\")}`,\r\n        },\r\n    };\r\n\r\n    function wrapValues(factors, facObj) {\r\n        setFactors(factors);\r\n        setFactorsObj(facObj);\r\n        cleanData(facObj);\r\n        setLoading(false);\r\n        setCount(1);\r\n        setPage(1);\r\n    }\r\n\r\n    async function getAllFactors() {\r\n        try {\r\n            const response = await axios.get(\r\n                `http://localhost:5000/api/private/factorproject/${bid}`,\r\n                config\r\n            );\r\n            let facObj = { \"fecha\": \"\", \"hora\": \"\" };\r\n            response.data.factors.forEach(factor => {\r\n                facObj[factor.name] = \"\";\r\n            });\r\n            wrapValues(response.data.factors, facObj);\r\n\r\n\r\n        } catch (error) {\r\n            setTimeout(() => {\r\n                setTimeout(() => {\r\n                    setOpen(false)\r\n                    setError(\"\");\r\n                }, 2000);\r\n            }, 5000);\r\n            setOpen(true)\r\n            return setError(\"Authentication failed!\");\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        let unmounted = false;\r\n        getAllFactors();\r\n        return () => { unmounted = true; };\r\n    }, []);\r\n\r\n    const cleanData = (facObj) => {\r\n        setOpenDialog(false)\r\n        let first = Object.assign({}, facObj);\r\n        first.fecha = year + \"-\" + month + \"-\" + date;\r\n        first.hora = \"00:00\"\r\n        first.id = uuidv4();\r\n        setInputFields([first])\r\n    };\r\n\r\n    const handleChangePage = (event, value) => {\r\n        setPage(value);\r\n    };\r\n\r\n    const handleAddDataFromCSV = (e, value) => {\r\n        e.preventDefault();\r\n\r\n        let csvKeys = Object.keys(CSVData[0]);\r\n        let realKeys = [];\r\n\r\n        for (let i = 0; i < factors.length; i++) {\r\n            realKeys.push(factors[i].name);\r\n        }\r\n        let canProceed = true;\r\n\r\n        for (let i = 0; i < csvKeys.length; i++) {\r\n            if (!csvKeys.includes(realKeys[i])) {\r\n                canProceed = false;\r\n            }\r\n\r\n        }\r\n\r\n        if (canProceed) {\r\n            let data = {\r\n                \"projectID\": bid,\r\n                \"programID\": pid,\r\n                \"values\": []\r\n            };\r\n\r\n            for (let i = 0; i < CSVData.length; i++) {\r\n                let element = {};\r\n                element.timestamp = year + \"-\" + month + \"-\" + date + \"T\" + t_time;\r\n                element.values = CSVData[i];\r\n                data.values.push(element)\r\n            }\r\n\r\n            try {\r\n                addData(data).then(() => {\r\n                    setOpen(true)\r\n                    cleanData(factorsObj);\r\n                });\r\n            } catch (error) {\r\n                setTimeout(() => {\r\n                    setTimeout(() => {\r\n                        setOpen(false)\r\n                        setError(\"\");\r\n                    }, 2000);\r\n                }, 5000);\r\n                setOpen(true)\r\n                return setError(\"Authentication failed!\");\r\n            }\r\n        } else {\r\n            console.log(\"Cant upload\")\r\n        }\r\n\r\n\r\n\r\n\r\n    };\r\n\r\n\r\n    const parseInput = async () => {\r\n\r\n        return new Promise(resolve => {\r\n            let data = {\r\n                \"projectID\": bid,\r\n                \"programID\": pid,\r\n                \"values\": []\r\n            };\r\n\r\n            const forEachLoop = async _ => {\r\n                for (let index = 0; index < inputFields.length; index++) {\r\n                    let element = {};\r\n                    element.timestamp = inputFields[index].fecha + \"T\" + inputFields[index].hora;\r\n                    element.values = {};\r\n\r\n\r\n                    for (let index_2 = 0; index_2 < factors.length; index_2++) {\r\n                        if (factors[index_2].type === \"value\" || inputFields[index][factors[index_2].name] === \"\") {\r\n                            element.values[factors[index_2].name] = inputFields[index][factors[index_2].name];\r\n                        } else {\r\n\r\n                            let file = inputFields[index][factors[index_2].name];\r\n\r\n                            element.values[factors[index_2].name] = await getBase64(file);\r\n                        }\r\n                    }\r\n\r\n                    data.values.push(element);\r\n                }\r\n            }\r\n            forEachLoop().then(() => {\r\n                resolve(data);\r\n            }\r\n            );\r\n        });\r\n    }\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        let data = await parseInput();\r\n\r\n        try {\r\n            addData(data).then(() => {\r\n                setOpen(true)\r\n                cleanData(factorsObj);\r\n            });\r\n        } catch (error) {\r\n            setTimeout(() => {\r\n                setTimeout(() => {\r\n                    setOpen(false)\r\n                    setError(\"\");\r\n                }, 2000);\r\n            }, 5000);\r\n            setOpen(true)\r\n            return setError(\"Authentication failed!\");\r\n        }\r\n\r\n    };\r\n\r\n    const handleChangeInput = (id, event) => {\r\n        const newInputFields = inputFields.map(i => {\r\n            if (id === i.id) {\r\n                i[event.target.name] = event.target.value\r\n            }\r\n            return i;\r\n        })\r\n        console.log(newInputFields);\r\n        setInputFields(newInputFields);\r\n    }\r\n\r\n    const handleChangeImageInput = (id, event) => {\r\n        const newInputFields = inputFields.map(i => {\r\n            if (id === i.id) {\r\n\r\n                i[event.target.name] = event.target.files[0];\r\n            }\r\n            return i;\r\n        })\r\n        setInputFields(newInputFields);\r\n    }\r\n\r\n    const handleAddFields = () => {\r\n\r\n\r\n        let newColumn = Object.assign({}, factorsObj);\r\n        newColumn.fecha = year + \"-\" + month + \"-\" + date;\r\n        newColumn.hora = \"00:00\"\r\n        newColumn.id = uuidv4(); //for (x in a){b[x] = 1}\r\n\r\n        setInputFields([...inputFields, newColumn]);\r\n\r\n        let con = inputFields.length + 1;\r\n        let result = con % 3 === 0 ? parseInt(con / 3) : 1 + parseInt(con / 3);\r\n        if (result > count) {\r\n            setCount(result);\r\n        }\r\n        if (page < result) {\r\n            setPage(result);\r\n        }\r\n    }\r\n\r\n    const handleRemoveFields = id => {\r\n        const values = [...inputFields];\r\n        values.splice(values.findIndex(value => value.id === id), 1);\r\n        setInputFields(values);\r\n\r\n        let con = inputFields.length - 1;\r\n        let result = con % 3 === 0 ? parseInt(con / 3) : 1 + parseInt(con / 3);\r\n        if (result < count) {\r\n            setCount(result);\r\n            setPage(result);\r\n        }\r\n    }\r\n\r\n    const removeImage = (id, factorName) => {\r\n        const newInputFields = inputFields.map(i => {\r\n            if (id === i.id) {\r\n\r\n                i[factorName] = \"\";\r\n            }\r\n            return i;\r\n        })\r\n        setInputFields(newInputFields);\r\n    }\r\n\r\n    const displayCard = (isCard, id, factorName, event) => {\r\n        setCardPositionX(event.clientX - 250);\r\n        setCardPositionY(event.clientY - 750);\r\n        let srcImage = \"\"\r\n\r\n\r\n        if (isCard !== \"\") {\r\n\r\n            inputFields.every(input => {\r\n\r\n                if (input.id === id) {\r\n                    srcImage = URL.createObjectURL(input[factorName]);\r\n                    return false;\r\n                }\r\n                return true;\r\n            });\r\n        }\r\n\r\n        setShowCard(isCard);\r\n        setImage(srcImage);\r\n    }\r\n\r\n    return (\r\n        <Container>\r\n            <PageHeader\r\n                title=\"Añadir datos al lugar\"\r\n                subTitle=\"Al crear los datos, se podrá realizar la predicción\"\r\n                icon={<InfoIcon fontSize=\"Large\"\r\n                />}\r\n            />\r\n            <div className={classes.programholder} hidden={!loading}>\r\n                <Fade\r\n                    in={loading}\r\n                    style={{\r\n                        transitionDelay: '0m',\r\n                    }}\r\n                    unmountOnExit\r\n                >\r\n                    <CircularProgress />\r\n                </Fade>\r\n                <br />\r\n            </div>\r\n            <Box\r\n                sx={{\r\n                    display: 'flex',\r\n                    justifyContent: 'center',\r\n                }}\r\n            >\r\n                <Pagination\r\n                    sx={{ mt: 1 }}\r\n                    size=\"large\"\r\n                    variant=\"outlined\"\r\n                    color=\"standard\"\r\n                    count={count}\r\n                    siblingCount={0}\r\n                    boundaryCount={2}\r\n                    page={page}\r\n                    onChange={handleChangePage}\r\n                />\r\n            </Box>\r\n            <Collapse in={open}>\r\n                <Alert\r\n                    severity={error ? \"error\" : \"success\"}\r\n                    action={\r\n                        <IconButton\r\n                            aria-label=\"close\"\r\n                            color=\"inherit\"\r\n                            size=\"small\"\r\n                            onClick={() => {\r\n                                setOpen(false);\r\n                            }}\r\n                        >\r\n                            <CloseIcon fontSize=\"inherit\" />\r\n                        </IconButton>\r\n                    }\r\n                >\r\n                    {error ? error : message}\r\n                </Alert>\r\n            </Collapse>\r\n            <form className={classes.root} onSubmit={handleSubmit}>\r\n                <Dialog\r\n                    open={openDialog}\r\n                    TransitionComponent={Transition}\r\n                    keepMounted\r\n                    onClose={() => setOpenDialog(false)}\r\n                    aria-labelledby=\"alert-dialog-slide-title\"\r\n                    aria-describedby=\"alert-dialog-slide-description\"\r\n                >\r\n                    <DialogTitle id=\"alert-dialog-slide-title\">¿Seguro que desea guardar la información?</DialogTitle>\r\n                    <DialogActions>\r\n                        <Button onClick={() => setOpenDialog(false)} color=\"standard\">\r\n                            Cancelar\r\n                        </Button>\r\n                        <Button type=\"submit\" onClick={handleSubmit} color=\"primary\">\r\n                            Enviar\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n                <Box\r\n                    sx={{\r\n                        display: 'flex',\r\n                        justifyContent: 'flex-start',\r\n                        ml: \"5%\"\r\n                    }}\r\n                >\r\n                    <div>\r\n                        <Box sx={{\r\n                            display: 'flex',\r\n                            justifyContent: 'center'\r\n                        }}>\r\n                            <Typography\r\n                                sx={{\r\n                                    m: \"8px\",\r\n                                    py: \"6px\",\r\n                                    px: \"20px\",\r\n                                    width: \"100%\",\r\n                                    borderRadius: 1\r\n                                }}\r\n                                align=\"center\"\r\n                                variant=\"subtitle1\"\r\n                                component=\"div\"\r\n                                hidden={factors.length === 0}\r\n                                className={classes.color}>\r\n                                Fecha\r\n                            </Typography>\r\n                        </Box>\r\n                        <Box sx={{\r\n                            display: 'flex',\r\n                            justifyContent: 'center'\r\n                        }}>\r\n                            <Typography\r\n                                sx={{\r\n                                    m: \"8px\",\r\n                                    py: \"6px\",\r\n                                    px: \"20px\",\r\n                                    width: \"100%\",\r\n                                    borderRadius: 1\r\n                                }}\r\n                                align=\"center\"\r\n                                variant=\"subtitle1\"\r\n                                component=\"div\"\r\n                                hidden={factors.length === 0}\r\n                                className={classes.color}>\r\n                                Hora\r\n                            </Typography>\r\n                        </Box>\r\n                        {factors.map(factor => (\r\n                            <Box sx={{\r\n                                display: 'flex',\r\n                                justifyContent: 'center'\r\n                            }}>\r\n                                <Typography\r\n                                    sx={{\r\n                                        m: \"8px\",\r\n                                        py: \"6px\",\r\n                                        px: \"20px\",\r\n                                        width: \"100%\",\r\n                                        borderRadius: 1\r\n                                    }}\r\n                                    align=\"center\"\r\n                                    variant=\"subtitle1\"\r\n                                    component=\"div\"\r\n                                    className={classes.color}>\r\n                                    {factor.name}\r\n                                </Typography>\r\n                            </Box>\r\n                        ))}\r\n                    </div>\r\n                    {inputFields.map((inputField, index) => (\r\n                        3 * page - index >= 1 && 3 * page - index <= 3 &&\r\n                        <div key={inputField.id}>\r\n                            <Box sx={{\r\n                                display: 'flex',\r\n                                justifyContent: 'center'\r\n                            }}>\r\n                                <TextField\r\n                                    type='date'\r\n                                    name=\"fecha\"\r\n                                    style={{ width: \"100%\" }}\r\n                                    defaultValue={year + \"-\" + month + \"-\" + date}\r\n                                    variant=\"outlined\"\r\n                                    size=\"small\"\r\n                                    value={inputField.fecha}\r\n                                    onChange={event => handleChangeInput(inputField.id, event)}\r\n                                />\r\n                            </Box>\r\n                            <Box sx={{\r\n                                display: 'flex',\r\n                                justifyContent: 'center'\r\n                            }}>\r\n                                <TextField\r\n                                    style={{ width: \"100%\" }}\r\n                                    type='time'\r\n                                    name=\"hora\"\r\n                                    defaultValue={\"00:00\"}\r\n                                    size=\"small\"\r\n                                    variant=\"outlined\"\r\n                                    value={inputField.hora}\r\n                                    onChange={event => handleChangeInput(inputField.id, event)}\r\n                                />\r\n                            </Box>\r\n                            {factors.map(factor => (\r\n                                <Box sx={{\r\n                                    display: 'flex',\r\n                                    justifyContent: 'center'\r\n                                }}>\r\n                                    {factor.type === \"value\"\r\n                                        ? <TextField\r\n                                            type='number'\r\n                                            name={factor.name}\r\n                                            label=\"\"\r\n                                            size=\"small\"\r\n                                            variant=\"outlined\"\r\n                                            value={inputField[factor.name]}\r\n                                            onChange={event => handleChangeInput(inputField.id, event)}\r\n                                        />\r\n                                        : inputFields[index][factor.name] === \"\"\r\n                                            ? <Tooltip title=\"Subir imagen\">\r\n                                                <Button\r\n                                                    style={{\r\n                                                        margin: \"8px\",\r\n                                                        width: \"100%\",\r\n                                                        paddingTop: \"8px\",\r\n                                                        paddingBottom: \"8px\",\r\n                                                        paddingLeft: \"20px\",\r\n                                                        paddingRight: \"20px\",\r\n                                                    }}\r\n                                                    variant=\"contained\"\r\n                                                    component=\"label\"\r\n                                                    className={classes.image}\r\n                                                >\r\n                                                    <UploadFile />\r\n                                                    <input\r\n                                                        name={factor.name}\r\n                                                        accept=\"image/*\"\r\n                                                        id=\"raised-button-file\"\r\n                                                        type=\"file\"\r\n                                                        hidden\r\n                                                        onChange={event => handleChangeImageInput(inputField.id, event)}\r\n                                                    />\r\n                                                </Button>\r\n                                            </Tooltip>\r\n                                            : <>\r\n                                                <Tooltip title=\"Abrir imagen\">\r\n                                                    <Button\r\n                                                        style={{\r\n                                                            margin: \"8px\",\r\n                                                            width: \"75%\",\r\n                                                            paddingTop: \"8px\",\r\n                                                            paddingBottom: \"8px\",\r\n                                                            paddingLeft: \"20px\",\r\n                                                            paddingRight: \"20px\",\r\n                                                        }}\r\n                                                        variant=\"contained\"\r\n                                                        onMouseEnter={(event) => displayCard(false, inputField.id, factor.name, event)}\r\n                                                        onMouseLeave={(event) => displayCard(true, \"\", \"\", event)}\r\n                                                        onClick={() => window.open(image)}\r\n                                                        target=\"_blank\"\r\n                                                        className={classes.showImg}\r\n                                                    >\r\n                                                        <VisibilityIcon />\r\n                                                    </Button>\r\n                                                </Tooltip>\r\n                                                <Tooltip title=\"Remover imagen\">\r\n                                                    <Button\r\n                                                        style={{\r\n                                                            margin: \"8px\",\r\n                                                            width: \"25%\",\r\n                                                            paddingTop: \"8px\",\r\n                                                            paddingBottom: \"8px\",\r\n                                                            paddingLeft: \"20px\",\r\n                                                            paddingRight: \"20px\",\r\n                                                        }}\r\n                                                        variant=\"contained\"\r\n                                                        className={classes.removeImg}\r\n                                                        onClick={() => removeImage(inputField.id, factor.name)}\r\n                                                    >\r\n                                                        <ClearIcon />\r\n                                                    </Button>\r\n                                                </Tooltip>\r\n                                            </>\r\n                                    }\r\n                                </Box>\r\n                            ))}\r\n                            <Box sx={{\r\n                                display: 'flex',\r\n                                justifyContent: 'center'\r\n                            }}>\r\n\r\n                                <Tooltip title=\"Quitar columna\">\r\n                                    <IconButton disabled={inputFields.length === 1} onClick={() => handleRemoveFields(inputField.id)}>\r\n                                        <Avatar className={classes.remove}>\r\n                                            <RemoveIcon />\r\n                                        </Avatar>\r\n                                    </IconButton>\r\n                                </Tooltip>\r\n                            </Box>\r\n                        </div>\r\n                    ))}\r\n                    <Box sx={{\r\n                        display: 'flex',\r\n                        alignItems: 'center'\r\n                    }}\r\n                    >\r\n                        <Tooltip title=\"Añadir nueva columna\">\r\n                            <IconButton style={{ position: \"fixed\" }} disabled={inputFields.length === 0} var\r\n                                onClick={handleAddFields}\r\n                            >\r\n                                <Avatar className={classes.add}>\r\n                                    <AddIcon />\r\n                                </Avatar>\r\n                            </IconButton>\r\n                        </Tooltip>\r\n\r\n                    </Box>\r\n                </Box>\r\n\r\n                <Box>\r\n                    <Controls.Button style={{ marginLeft: \"4.5%\" }}\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        onClick={() => setOpenDialog(true)}\r\n                        text=\"Guardar datos ingresados\"\r\n                    />\r\n                </Box>\r\n                <br />\r\n                <br />\r\n                <br />\r\n                <br />\r\n                <PageHeader\r\n                    title={\"Subir archivo CSV\"}\r\n                    subTitle={\"Ingresar información a la base de datos con un archivo CSV.\"}\r\n                    icon={<FileUploadIcon fontSize=\"large\" color='primary'\r\n                    />}\r\n                />\r\n                <Box style={{ width: \"90%\" }}>\r\n\r\n                    <FileManager setCSVData={setCSVData} />\r\n                    <Controls.Button\r\n                        text=\"Enviar datos\"\r\n                        color=\"primary\"\r\n                        onClick={handleAddDataFromCSV}\r\n                    />\r\n                </Box>\r\n            </form>\r\n            <Card\r\n                sx={{\r\n                    maxWidth: 300,\r\n                    maxHeight: 300,\r\n                    position: \"relative\",\r\n                    top: cardPositionY,\r\n                    left: cardPositionX,\r\n                }}\r\n                hidden={showCard}\r\n            >\r\n                <CardMedia\r\n                    component=\"img\"\r\n                    height=\"194\"\r\n                    image={image}\r\n                    alt=\"\"\r\n                />\r\n            </Card>\r\n        </Container>\r\n    );\r\n}\r\n\r\nexport default CreateData;"]},"metadata":{},"sourceType":"module"}