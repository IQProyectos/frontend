{"ast":null,"code":"/**\r\n * @sgratzl/chartjs-chart-boxplot\r\n * https://github.com/sgratzl/chartjs-chart-boxplot\r\n *\r\n * Copyright (c) 2021 Samuel Gratzl <sam@sgratzl.com>\r\n */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('chart.js'), require('chart.js/helpers')) : typeof define === 'function' && define.amd ? define(['exports', 'chart.js', 'chart.js/helpers'], factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.ChartBoxPlot = {}, global.Chart, global.Chart.helpers));\n})(this, function (exports, chart_js, helpers) {\n  'use strict';\n  /**\r\n   * @sgratzl/boxplots\r\n   * https://github.com/sgratzl/boxplots\r\n   *\r\n   * Copyright (c) 2021 Samuel Gratzl <sam@sgratzl.com>\r\n   */\n\n  function quantilesInterpolate(arr, length, interpolate) {\n    const n1 = length - 1;\n\n    const compute = q => {\n      const index = q * n1;\n      const lo = Math.floor(index);\n      const h = index - lo;\n      const a = arr[lo];\n      return h === 0 ? a : interpolate(a, arr[Math.min(lo + 1, n1)], h);\n    };\n\n    return {\n      q1: compute(0.25),\n      median: compute(0.5),\n      q3: compute(0.75)\n    };\n  }\n\n  function quantilesType7(arr, length = arr.length) {\n    return quantilesInterpolate(arr, length, (a, b, alpha) => a + alpha * (b - a));\n  }\n\n  function quantilesLinear(arr, length = arr.length) {\n    return quantilesInterpolate(arr, length, (i, j, fraction) => i + (j - i) * fraction);\n  }\n\n  function quantilesLower(arr, length = arr.length) {\n    return quantilesInterpolate(arr, length, i => i);\n  }\n\n  function quantilesHigher(arr, length = arr.length) {\n    return quantilesInterpolate(arr, length, (_, j) => j);\n  }\n\n  function quantilesNearest(arr, length = arr.length) {\n    return quantilesInterpolate(arr, length, (i, j, fraction) => fraction < 0.5 ? i : j);\n  }\n\n  function quantilesMidpoint(arr, length = arr.length) {\n    return quantilesInterpolate(arr, length, (i, j) => (i + j) * 0.5);\n  }\n\n  function quantilesFivenum(arr, length = arr.length) {\n    const n = length;\n    const n4 = Math.floor((n + 3) / 2) / 2;\n\n    const compute = d => 0.5 * (arr[Math.floor(d) - 1] + arr[Math.ceil(d) - 1]);\n\n    return {\n      q1: compute(n4),\n      median: compute((n + 1) / 2),\n      q3: compute(n + 1 - n4)\n    };\n  }\n\n  function quantilesHinges(arr, length = arr.length) {\n    return quantilesFivenum(arr, length);\n  }\n\n  function createSortedData(data) {\n    let min = Number.POSITIVE_INFINITY;\n    let max = Number.NEGATIVE_INFINITY;\n    let sum = 0;\n    let valid = 0;\n    const length = data.length;\n    const vs = data instanceof Float64Array ? new Float64Array(length) : new Float32Array(length);\n\n    for (let i = 0; i < length; ++i) {\n      const v = data[i];\n\n      if (v == null || Number.isNaN(v)) {\n        continue;\n      }\n\n      vs[valid] = v;\n      valid++;\n\n      if (v < min) {\n        min = v;\n      }\n\n      if (v > max) {\n        max = v;\n      }\n\n      sum += v;\n    }\n\n    const missing = length - valid;\n\n    if (valid === 0) {\n      return {\n        sum,\n        min,\n        max,\n        missing,\n        s: []\n      };\n    }\n\n    const s = valid === length ? vs : vs.subarray(0, valid);\n    s.sort((a, b) => a === b ? 0 : a < b ? -1 : 1);\n    return {\n      sum,\n      min: s[0],\n      max: s[s.length - 1],\n      missing,\n      s\n    };\n  }\n\n  function withSortedData(data) {\n    if (data.length === 0) {\n      return {\n        sum: Number.NaN,\n        min: Number.NaN,\n        max: Number.NaN,\n        missing: 0,\n        s: []\n      };\n    }\n\n    const min = data[0];\n    const max = data[data.length - 1];\n\n    const red = (acc, v) => acc + v;\n\n    const sum = data instanceof Float32Array ? data.reduce(red, 0) : data instanceof Float64Array ? data.reduce(red, 0) : data.reduce(red, 0);\n    return {\n      sum,\n      min,\n      max,\n      missing: 0,\n      s: data\n    };\n  }\n\n  function boxplot(data, options = {}) {\n    const {\n      quantiles,\n      validAndSorted,\n      coef,\n      whiskersMode,\n      eps\n    } = Object.assign({\n      coef: 1.5,\n      eps: 10e-3,\n      quantiles: quantilesType7,\n      validAndSorted: false,\n      whiskersMode: 'nearest'\n    }, options);\n    const {\n      missing,\n      s,\n      min,\n      max,\n      sum\n    } = validAndSorted ? withSortedData(data) : createSortedData(data);\n    const invalid = {\n      min: Number.NaN,\n      max: Number.NaN,\n      mean: Number.NaN,\n      missing,\n      iqr: Number.NaN,\n      count: data.length,\n      whiskerHigh: Number.NaN,\n      whiskerLow: Number.NaN,\n      outlier: [],\n      median: Number.NaN,\n      q1: Number.NaN,\n      q3: Number.NaN,\n      items: []\n    };\n\n    const same = (a, b) => Math.abs(a - b) < eps;\n\n    const valid = data.length - missing;\n\n    if (valid === 0) {\n      return invalid;\n    }\n\n    const {\n      median,\n      q1,\n      q3\n    } = quantiles(s, valid);\n    const iqr = q3 - q1;\n    const isCoefValid = typeof coef === 'number' && coef > 0;\n    let whiskerLow = isCoefValid ? Math.max(min, q1 - coef * iqr) : min;\n    let whiskerHigh = isCoefValid ? Math.min(max, q3 + coef * iqr) : max;\n    const outlier = [];\n\n    for (let i = 0; i < valid; ++i) {\n      const v = s[i];\n\n      if (v >= whiskerLow || same(v, whiskerLow)) {\n        if (whiskersMode === 'nearest') {\n          whiskerLow = v;\n        }\n\n        break;\n      }\n\n      if (outlier.length === 0 || !same(outlier[outlier.length - 1], v)) {\n        outlier.push(v);\n      }\n    }\n\n    const reversedOutliers = [];\n\n    for (let i = valid - 1; i >= 0; --i) {\n      const v = s[i];\n\n      if (v <= whiskerHigh || same(v, whiskerHigh)) {\n        if (whiskersMode === 'nearest') {\n          whiskerHigh = v;\n        }\n\n        break;\n      }\n\n      if ((reversedOutliers.length === 0 || !same(reversedOutliers[reversedOutliers.length - 1], v)) && (outlier.length === 0 || !same(outlier[outlier.length - 1], v))) {\n        reversedOutliers.push(v);\n      }\n    }\n\n    return {\n      min,\n      max,\n      count: data.length,\n      missing,\n      mean: sum / valid,\n      whiskerHigh,\n      whiskerLow,\n      outlier: outlier.concat(reversedOutliers.reverse()),\n      median,\n      q1,\n      q3,\n      iqr,\n      items: s\n    };\n  }\n\n  function gaussian(u) {\n    return 1 / Math.sqrt(2 * Math.PI) * Math.exp(-0.5 * u * u);\n  }\n\n  function mean(x) {\n    if (x.length === 0) {\n      return Number.NaN;\n    }\n\n    return x.reduce((m, xi, i) => m + (xi - m) / (i + 1), 0);\n  }\n\n  function variance(x) {\n    const n = x.length;\n\n    if (n < 1) {\n      return Number.NaN;\n    }\n\n    if (n === 1) {\n      return 0;\n    }\n\n    const m = mean(x);\n    return x.reduce((acc, xi) => acc + (xi - m) * (xi - m), 0) / (x.length - 1);\n  }\n\n  function nrd(sample, quantiles) {\n    const q = quantiles(sample);\n    const h = (q.q3 - q.q1) / 1.34;\n    return 1.06 * Math.min(Math.sqrt(variance(sample)), h) * Math.pow(sample.length, -1 / 5);\n  }\n\n  function kde(points, sample, quantiles) {\n    const bw = nrd(sample, quantiles);\n    return points.map(v => {\n      const y = sample.reduce((acc, s) => acc + gaussian((v - s) / bw), 0);\n      return {\n        v,\n        estimate: y / bw / sample.length\n      };\n    });\n  }\n\n  function whiskers(boxplot, arr, coef = 1.5) {\n    const iqr = boxplot.q3 - boxplot.q1;\n    const coefValid = typeof coef === 'number' && coef > 0;\n    let whiskerMin = coefValid ? Math.max(boxplot.min, boxplot.q1 - coef * iqr) : boxplot.min;\n    let whiskerMax = coefValid ? Math.min(boxplot.max, boxplot.q3 + coef * iqr) : boxplot.max;\n\n    if (Array.isArray(arr)) {\n      for (let i = 0; i < arr.length; i += 1) {\n        const v = arr[i];\n\n        if (v >= whiskerMin) {\n          whiskerMin = v;\n          break;\n        }\n      }\n\n      for (let i = arr.length - 1; i >= 0; i -= 1) {\n        const v = arr[i];\n\n        if (v <= whiskerMax) {\n          whiskerMax = v;\n          break;\n        }\n      }\n    }\n\n    return {\n      whiskerMin,\n      whiskerMax\n    };\n  }\n\n  const defaultStatsOptions = {\n    coef: 1.5,\n    quantiles: 7\n  };\n\n  function determineQuantiles(q) {\n    if (typeof q === 'function') {\n      return q;\n    }\n\n    const lookup = {\n      hinges: quantilesHinges,\n      fivenum: quantilesFivenum,\n      7: quantilesType7,\n      quantiles: quantilesType7,\n      linear: quantilesLinear,\n      lower: quantilesLower,\n      higher: quantilesHigher,\n      nearest: quantilesNearest,\n      midpoint: quantilesMidpoint\n    };\n    return lookup[q] || quantilesType7;\n  }\n\n  function determineStatsOptions(options) {\n    const coef = options == null || typeof options.coef !== 'number' ? defaultStatsOptions.coef : options.coef;\n    const q = options == null || options.quantiles == null ? quantilesType7 : options.quantiles;\n    const quantiles = determineQuantiles(q);\n    return {\n      coef,\n      quantiles\n    };\n  }\n\n  function boxplotStats(arr, options) {\n    const r = boxplot(arr, determineStatsOptions(options));\n    return {\n      items: Array.from(r.items),\n      outliers: r.outlier,\n      whiskerMax: r.whiskerHigh,\n      whiskerMin: r.whiskerLow,\n      max: r.max,\n      median: r.median,\n      mean: r.mean,\n      min: r.min,\n      q1: r.q1,\n      q3: r.q3\n    };\n  }\n\n  function violinStats(arr, options) {\n    if (arr.length === 0) {\n      return undefined;\n    }\n\n    const items = arr.filter(v => typeof v === 'number' && !Number.isNaN(v)).sort((a, b) => a - b);\n    const mean = items.reduce((acc, v) => acc + v, 0) / items.length;\n    const {\n      quantiles\n    } = determineStatsOptions(options);\n    const stats = quantiles(items);\n    const min = items[0];\n    const max = items[items.length - 1];\n    const range = max - min;\n    const samples = [];\n    const inc = range / options.points;\n\n    for (let v = min; v <= max && inc > 0; v += inc) {\n      samples.push(v);\n    }\n\n    if (samples[samples.length - 1] !== max) {\n      samples.push(max);\n    }\n\n    const coords = kde(items, samples, quantiles);\n    const maxEstimate = coords.reduce((a, d) => Math.max(a, d.estimate), Number.NEGATIVE_INFINITY);\n    return { ...stats,\n      min,\n      items,\n      mean,\n      max,\n      coords,\n      outliers: [],\n      maxEstimate\n    };\n  }\n\n  function asBoxPlotStats(value, options) {\n    if (!value) {\n      return undefined;\n    }\n\n    if (typeof value.median === 'number' && typeof value.q1 === 'number' && typeof value.q3 === 'number') {\n      if (typeof value.whiskerMin === 'undefined') {\n        const {\n          coef\n        } = determineStatsOptions(options);\n        const {\n          whiskerMin,\n          whiskerMax\n        } = whiskers(value, Array.isArray(value.items) ? value.items.slice().sort((a, b) => a - b) : null, coef);\n        value.whiskerMin = whiskerMin;\n        value.whiskerMax = whiskerMax;\n      }\n\n      return value;\n    }\n\n    if (!Array.isArray(value)) {\n      return undefined;\n    }\n\n    return boxplotStats(value, options);\n  }\n\n  function asViolinStats(value, options) {\n    if (!value) {\n      return undefined;\n    }\n\n    if (typeof value.median === 'number' && Array.isArray(value.coords)) {\n      return value;\n    }\n\n    if (!Array.isArray(value)) {\n      return undefined;\n    }\n\n    return violinStats(value, options);\n  }\n\n  function rnd(seed = Date.now()) {\n    let s = seed;\n    return () => {\n      s = (s * 9301 + 49297) % 233280;\n      return s / 233280;\n    };\n  }\n\n  const interpolators = {\n    number(from, to, factor) {\n      if (from === to) {\n        return to;\n      }\n\n      if (from == null) {\n        return to;\n      }\n\n      if (to == null) {\n        return from;\n      }\n\n      return from + (to - from) * factor;\n    }\n\n  };\n\n  function interpolateNumberArray(from, to, factor) {\n    if (typeof from === 'number' && typeof to === 'number') {\n      return interpolators.number(from, to, factor);\n    }\n\n    if (Array.isArray(from) && Array.isArray(to)) {\n      return to.map((t, i) => interpolators.number(from[i], t, factor));\n    }\n\n    return to;\n  }\n\n  function interpolateKdeCoords(from, to, factor) {\n    if (Array.isArray(from) && Array.isArray(to)) {\n      return to.map((t, i) => ({\n        v: interpolators.number(from[i] ? from[i].v : null, t.v, factor),\n        estimate: interpolators.number(from[i] ? from[i].estimate : null, t.estimate, factor)\n      }));\n    }\n\n    return to;\n  }\n\n  function patchInHoveredOutlier(item) {\n    const value = item.formattedValue;\n    const that = this;\n\n    if (value && that._tooltipOutlier != null && item.datasetIndex === that._tooltipOutlier.datasetIndex) {\n      value.hoveredOutlierIndex = that._tooltipOutlier.index;\n    }\n  }\n\n  function outlierPositioner(items, eventPosition) {\n    if (!items.length) {\n      return false;\n    }\n\n    let x = 0;\n    let y = 0;\n    let count = 0;\n\n    for (let i = 0; i < items.length; i += 1) {\n      const el = items[i].element;\n\n      if (el && el.hasValue()) {\n        const pos = el.tooltipPosition(eventPosition, this);\n        x += pos.x;\n        y += pos.y;\n        count += 1;\n      }\n    }\n\n    return {\n      x: x / count,\n      y: y / count\n    };\n  }\n\n  outlierPositioner.id = 'averageInstance';\n\n  outlierPositioner.register = () => {\n    chart_js.Tooltip.positioners.averageInstance = outlierPositioner;\n    return outlierPositioner;\n  };\n\n  function baseDefaults$1(keys) {\n    const colorKeys = ['borderColor', 'backgroundColor'].concat(keys.filter(c => c.endsWith('Color')));\n    return {\n      animations: {\n        numberArray: {\n          fn: interpolateNumberArray,\n          properties: ['outliers', 'items']\n        },\n        colors: {\n          type: 'color',\n          properties: colorKeys\n        }\n      },\n      transitions: {\n        show: {\n          animations: {\n            colors: {\n              type: 'color',\n              properties: colorKeys,\n              from: 'transparent'\n            }\n          }\n        },\n        hide: {\n          animations: {\n            colors: {\n              type: 'color',\n              properties: colorKeys,\n              to: 'transparent'\n            }\n          }\n        }\n      },\n      minStats: 'min',\n      maxStats: 'max',\n      ...defaultStatsOptions\n    };\n  }\n\n  function defaultOverrides() {\n    return {\n      plugins: {\n        tooltips: {\n          position: outlierPositioner.register().id,\n          callbacks: {\n            beforeLabel: patchInHoveredOutlier\n          }\n        }\n      }\n    };\n  }\n\n  class StatsBase$1 extends chart_js.BarController {\n    _transformStats(target, source, mapper) {\n      for (const key of ['min', 'max', 'median', 'q3', 'q1', 'mean']) {\n        const v = source[key];\n\n        if (typeof v === 'number') {\n          target[key] = mapper(v);\n        }\n      }\n\n      for (const key of ['outliers', 'items']) {\n        if (Array.isArray(source[key])) {\n          target[key] = source[key].map(mapper);\n        }\n      }\n    }\n\n    getMinMax(scale, canStack) {\n      const bak = scale.axis;\n      const config = this.options;\n      scale.axis = config.minStats;\n      const {\n        min\n      } = super.getMinMax(scale, canStack);\n      scale.axis = config.maxStats;\n      const {\n        max\n      } = super.getMinMax(scale, canStack);\n      scale.axis = bak;\n      return {\n        min,\n        max\n      };\n    }\n\n    parsePrimitiveData(meta, data, start, count) {\n      const vScale = meta.vScale;\n      const iScale = meta.iScale;\n      const labels = iScale.getLabels();\n      const r = [];\n\n      for (let i = 0; i < count; i += 1) {\n        const index = i + start;\n        const parsed = {};\n        parsed[iScale.axis] = iScale.parse(labels[index], index);\n\n        const stats = this._parseStats(data == null ? null : data[index], this.options);\n\n        if (stats) {\n          Object.assign(parsed, stats);\n          parsed[vScale.axis] = stats.median;\n        }\n\n        r.push(parsed);\n      }\n\n      return r;\n    }\n\n    parseArrayData(meta, data, start, count) {\n      return this.parsePrimitiveData(meta, data, start, count);\n    }\n\n    parseObjectData(meta, data, start, count) {\n      return this.parsePrimitiveData(meta, data, start, count);\n    }\n\n    getLabelAndValue(index) {\n      const r = super.getLabelAndValue(index);\n      const {\n        vScale\n      } = this._cachedMeta;\n      const parsed = this.getParsed(index);\n\n      if (!vScale || !parsed || r.value === 'NaN') {\n        return r;\n      }\n\n      r.value = {\n        raw: parsed,\n        hoveredOutlierIndex: -1\n      };\n\n      this._transformStats(r.value, parsed, v => vScale.getLabelForValue(v));\n\n      const s = this._toStringStats(r.value.raw);\n\n      r.value.toString = function toString() {\n        if (this.hoveredOutlierIndex >= 0) {\n          return `(outlier: ${this.outliers[this.hoveredOutlierIndex]})`;\n        }\n\n        return s;\n      };\n\n      return r;\n    }\n\n    _toStringStats(b) {\n      const f = v => v == null ? 'NaN' : helpers.formatNumber(v, this.chart.options.locale, {});\n\n      return `(min: ${f(b.min)}, 25% quantile: ${f(b.q1)}, median: ${f(b.median)}, mean: ${f(b.mean)}, 75% quantile: ${f(b.q3)}, max: ${f(b.max)})`;\n    }\n\n    updateElement(rectangle, index, properties, mode) {\n      const reset = mode === 'reset';\n      const scale = this._cachedMeta.vScale;\n      const parsed = this.getParsed(index);\n      const base = scale.getBasePixel();\n      properties._datasetIndex = this.index;\n      properties._index = index;\n\n      this._transformStats(properties, parsed, v => reset ? base : scale.getPixelForValue(v, index));\n\n      super.updateElement(rectangle, index, properties, mode);\n    }\n\n  }\n\n  const baseDefaults = {\n    borderWidth: 1,\n    outlierStyle: 'circle',\n    outlierRadius: 2,\n    outlierBorderWidth: 1,\n    itemStyle: 'circle',\n    itemRadius: 0,\n    itemBorderWidth: 0,\n    meanStyle: 'circle',\n    meanRadius: 3,\n    meanBorderWidth: 1,\n    hitPadding: 2,\n    outlierHitRadius: 4\n  };\n  const baseRoutes = {\n    outlierBackgroundColor: 'backgroundColor',\n    outlierBorderColor: 'borderColor',\n    itemBackgroundColor: 'backgroundColor',\n    itemBorderColor: 'borderColor',\n    meanBackgroundColor: 'backgroundColor',\n    meanBorderColor: 'borderColor'\n  };\n\n  const baseOptionKeys = (() => Object.keys(baseDefaults).concat(Object.keys(baseRoutes)))();\n\n  class StatsBase extends chart_js.Element {\n    isVertical() {\n      return !this.horizontal;\n    }\n\n    _drawItems(ctx) {\n      const vert = this.isVertical();\n      const props = this.getProps(['x', 'y', 'items', 'width', 'height', 'outliers']);\n      const {\n        options\n      } = this;\n\n      if (options.itemRadius <= 0 || !props.items || props.items.length <= 0) {\n        return;\n      }\n\n      ctx.save();\n      ctx.strokeStyle = options.itemBorderColor;\n      ctx.fillStyle = options.itemBackgroundColor;\n      ctx.lineWidth = options.itemBorderWidth;\n      const random = rnd(this._datasetIndex * 1000 + this._index);\n      const pointOptions = {\n        pointStyle: options.itemStyle,\n        radius: options.itemRadius,\n        borderWidth: options.itemBorderWidth\n      };\n      const outliers = new Set(props.outliers || []);\n\n      if (vert) {\n        props.items.forEach(v => {\n          if (!outliers.has(v)) {\n            helpers.drawPoint(ctx, pointOptions, props.x - props.width / 2 + random() * props.width, v);\n          }\n        });\n      } else {\n        props.items.forEach(v => {\n          if (!outliers.has(v)) {\n            helpers.drawPoint(ctx, pointOptions, v, props.y - props.height / 2 + random() * props.height);\n          }\n        });\n      }\n\n      ctx.restore();\n    }\n\n    _drawOutliers(ctx) {\n      const vert = this.isVertical();\n      const props = this.getProps(['x', 'y', 'outliers']);\n      const {\n        options\n      } = this;\n\n      if (options.outlierRadius <= 0 || !props.outliers || props.outliers.length === 0) {\n        return;\n      }\n\n      ctx.save();\n      ctx.fillStyle = options.outlierBackgroundColor;\n      ctx.strokeStyle = options.outlierBorderColor;\n      ctx.lineWidth = options.outlierBorderWidth;\n      const pointOptions = {\n        pointStyle: options.outlierStyle,\n        radius: options.outlierRadius,\n        borderWidth: options.outlierBorderWidth\n      };\n\n      if (vert) {\n        props.outliers.forEach(v => {\n          helpers.drawPoint(ctx, pointOptions, props.x, v);\n        });\n      } else {\n        props.outliers.forEach(v => {\n          helpers.drawPoint(ctx, pointOptions, v, props.y);\n        });\n      }\n\n      ctx.restore();\n    }\n\n    _drawMeanDot(ctx) {\n      const vert = this.isVertical();\n      const props = this.getProps(['x', 'y', 'mean']);\n      const {\n        options\n      } = this;\n\n      if (options.meanRadius <= 0 || props.mean == null || Number.isNaN(props.mean)) {\n        return;\n      }\n\n      ctx.save();\n      ctx.fillStyle = options.meanBackgroundColor;\n      ctx.strokeStyle = options.meanBorderColor;\n      ctx.lineWidth = options.meanBorderWidth;\n      const pointOptions = {\n        pointStyle: options.meanStyle,\n        radius: options.meanRadius,\n        borderWidth: options.meanBorderWidth\n      };\n\n      if (vert) {\n        helpers.drawPoint(ctx, pointOptions, props.x, props.mean);\n      } else {\n        helpers.drawPoint(ctx, pointOptions, props.mean, props.y);\n      }\n\n      ctx.restore();\n    }\n\n    _getBounds(_useFinalPosition) {\n      return {\n        left: 0,\n        top: 0,\n        right: 0,\n        bottom: 0\n      };\n    }\n\n    _getHitBounds(useFinalPosition) {\n      const padding = this.options.hitPadding;\n\n      const b = this._getBounds(useFinalPosition);\n\n      return {\n        left: b.left - padding,\n        top: b.top - padding,\n        right: b.right + padding,\n        bottom: b.bottom + padding\n      };\n    }\n\n    inRange(mouseX, mouseY, useFinalPosition) {\n      if (Number.isNaN(this.x) && Number.isNaN(this.y)) {\n        return false;\n      }\n\n      return this._boxInRange(mouseX, mouseY, useFinalPosition) || this._outlierIndexInRange(mouseX, mouseY, useFinalPosition) >= 0;\n    }\n\n    inXRange(mouseX, useFinalPosition) {\n      const bounds = this._getHitBounds(useFinalPosition);\n\n      return mouseX >= bounds.left && mouseX <= bounds.right;\n    }\n\n    inYRange(mouseY, useFinalPosition) {\n      const bounds = this._getHitBounds(useFinalPosition);\n\n      return mouseY >= bounds.top && mouseY <= bounds.bottom;\n    }\n\n    _outlierIndexInRange(mouseX, mouseY, useFinalPosition) {\n      const props = this.getProps(['x', 'y'], useFinalPosition);\n      const hitRadius = this.options.outlierHitRadius;\n\n      const outliers = this._getOutliers(useFinalPosition);\n\n      const vertical = this.isVertical();\n\n      if (vertical && Math.abs(mouseX - props.x) > hitRadius || !vertical && Math.abs(mouseY - props.y) > hitRadius) {\n        return -1;\n      }\n\n      const toCompare = vertical ? mouseY : mouseX;\n\n      for (let i = 0; i < outliers.length; i += 1) {\n        if (Math.abs(outliers[i] - toCompare) <= hitRadius) {\n          return i;\n        }\n      }\n\n      return -1;\n    }\n\n    _boxInRange(mouseX, mouseY, useFinalPosition) {\n      const bounds = this._getHitBounds(useFinalPosition);\n\n      return mouseX >= bounds.left && mouseX <= bounds.right && mouseY >= bounds.top && mouseY <= bounds.bottom;\n    }\n\n    getCenterPoint(useFinalPosition) {\n      const props = this.getProps(['x', 'y'], useFinalPosition);\n      return {\n        x: props.x,\n        y: props.y\n      };\n    }\n\n    _getOutliers(useFinalPosition) {\n      const props = this.getProps(['outliers'], useFinalPosition);\n      return props.outliers || [];\n    }\n\n    tooltipPosition(eventPosition, tooltip) {\n      if (!eventPosition || typeof eventPosition === 'boolean') {\n        return this.getCenterPoint();\n      }\n\n      if (tooltip) {\n        delete tooltip._tooltipOutlier;\n      }\n\n      const props = this.getProps(['x', 'y']);\n\n      const index = this._outlierIndexInRange(eventPosition.x, eventPosition.y);\n\n      if (index < 0 || !tooltip) {\n        return this.getCenterPoint();\n      }\n\n      tooltip._tooltipOutlier = {\n        index,\n        datasetIndex: this._datasetIndex\n      };\n\n      if (this.isVertical()) {\n        return {\n          x: props.x,\n          y: this._getOutliers()[index]\n        };\n      }\n\n      return {\n        x: this._getOutliers()[index],\n        y: props.y\n      };\n    }\n\n  }\n\n  const boxOptionsKeys = baseOptionKeys.concat(['medianColor', 'lowerBackgroundColor']);\n\n  class BoxAndWiskers extends StatsBase {\n    draw(ctx) {\n      ctx.save();\n      ctx.fillStyle = this.options.backgroundColor;\n      ctx.strokeStyle = this.options.borderColor;\n      ctx.lineWidth = this.options.borderWidth;\n\n      this._drawBoxPlot(ctx);\n\n      this._drawOutliers(ctx);\n\n      this._drawMeanDot(ctx);\n\n      ctx.restore();\n\n      this._drawItems(ctx);\n    }\n\n    _drawBoxPlot(ctx) {\n      if (this.isVertical()) {\n        this._drawBoxPlotVertical(ctx);\n      } else {\n        this._drawBoxPlotHorizontal(ctx);\n      }\n    }\n\n    _drawBoxPlotVertical(ctx) {\n      const {\n        options\n      } = this;\n      const props = this.getProps(['x', 'width', 'q1', 'q3', 'median', 'whiskerMin', 'whiskerMax']);\n      const {\n        x\n      } = props;\n      const {\n        width\n      } = props;\n      const x0 = x - width / 2;\n\n      if (props.q3 > props.q1) {\n        ctx.fillRect(x0, props.q1, width, props.q3 - props.q1);\n      } else {\n        ctx.fillRect(x0, props.q3, width, props.q1 - props.q3);\n      }\n\n      ctx.save();\n\n      if (options.medianColor && options.medianColor !== 'transparent' && options.medianColor !== '#0000') {\n        ctx.strokeStyle = options.medianColor;\n      }\n\n      ctx.beginPath();\n      ctx.moveTo(x0, props.median);\n      ctx.lineTo(x0 + width, props.median);\n      ctx.closePath();\n      ctx.stroke();\n      ctx.restore();\n      ctx.save();\n\n      if (options.lowerBackgroundColor && options.lowerBackgroundColor !== 'transparent' && options.lowerBackgroundColor !== '#0000') {\n        ctx.fillStyle = options.lowerBackgroundColor;\n\n        if (props.q3 > props.q1) {\n          ctx.fillRect(x0, props.median, width, props.q3 - props.median);\n        } else {\n          ctx.fillRect(x0, props.median, width, props.q1 - props.median);\n        }\n      }\n\n      ctx.restore();\n\n      if (props.q3 > props.q1) {\n        ctx.strokeRect(x0, props.q1, width, props.q3 - props.q1);\n      } else {\n        ctx.strokeRect(x0, props.q3, width, props.q1 - props.q3);\n      }\n\n      ctx.beginPath();\n      ctx.moveTo(x0, props.whiskerMin);\n      ctx.lineTo(x0 + width, props.whiskerMin);\n      ctx.moveTo(x, props.whiskerMin);\n      ctx.lineTo(x, props.q1);\n      ctx.moveTo(x0, props.whiskerMax);\n      ctx.lineTo(x0 + width, props.whiskerMax);\n      ctx.moveTo(x, props.whiskerMax);\n      ctx.lineTo(x, props.q3);\n      ctx.closePath();\n      ctx.stroke();\n    }\n\n    _drawBoxPlotHorizontal(ctx) {\n      const {\n        options\n      } = this;\n      const props = this.getProps(['y', 'height', 'q1', 'q3', 'median', 'whiskerMin', 'whiskerMax']);\n      const {\n        y\n      } = props;\n      const {\n        height\n      } = props;\n      const y0 = y - height / 2;\n\n      if (props.q3 > props.q1) {\n        ctx.fillRect(props.q1, y0, props.q3 - props.q1, height);\n      } else {\n        ctx.fillRect(props.q3, y0, props.q1 - props.q3, height);\n      }\n\n      ctx.save();\n\n      if (options.medianColor && options.medianColor !== 'transparent') {\n        ctx.strokeStyle = options.medianColor;\n      }\n\n      ctx.beginPath();\n      ctx.moveTo(props.median, y0);\n      ctx.lineTo(props.median, y0 + height);\n      ctx.closePath();\n      ctx.stroke();\n      ctx.restore();\n      ctx.save();\n\n      if (options.lowerBackgroundColor && options.lowerBackgroundColor !== 'transparent') {\n        ctx.fillStyle = options.lowerBackgroundColor;\n\n        if (props.q3 > props.q1) {\n          ctx.fillRect(props.median, y0, props.q3 - props.median, height);\n        } else {\n          ctx.fillRect(props.median, y0, props.q1 - props.median, height);\n        }\n      }\n\n      ctx.restore();\n\n      if (props.q3 > props.q1) {\n        ctx.strokeRect(props.q1, y0, props.q3 - props.q1, height);\n      } else {\n        ctx.strokeRect(props.q3, y0, props.q1 - props.q3, height);\n      }\n\n      ctx.beginPath();\n      ctx.moveTo(props.whiskerMin, y0);\n      ctx.lineTo(props.whiskerMin, y0 + height);\n      ctx.moveTo(props.whiskerMin, y);\n      ctx.lineTo(props.q1, y);\n      ctx.moveTo(props.whiskerMax, y0);\n      ctx.lineTo(props.whiskerMax, y0 + height);\n      ctx.moveTo(props.whiskerMax, y);\n      ctx.lineTo(props.q3, y);\n      ctx.closePath();\n      ctx.stroke();\n    }\n\n    _getBounds(useFinalPosition) {\n      const vert = this.isVertical();\n\n      if (this.x == null) {\n        return {\n          left: 0,\n          top: 0,\n          right: 0,\n          bottom: 0\n        };\n      }\n\n      if (vert) {\n        const {\n          x,\n          width,\n          whiskerMax,\n          whiskerMin\n        } = this.getProps(['x', 'width', 'whiskerMin', 'whiskerMax'], useFinalPosition);\n        const x0 = x - width / 2;\n        return {\n          left: x0,\n          top: whiskerMax,\n          right: x0 + width,\n          bottom: whiskerMin\n        };\n      }\n\n      const {\n        y,\n        height,\n        whiskerMax,\n        whiskerMin\n      } = this.getProps(['y', 'height', 'whiskerMin', 'whiskerMax'], useFinalPosition);\n      const y0 = y - height / 2;\n      return {\n        left: whiskerMin,\n        top: y0,\n        right: whiskerMax,\n        bottom: y0 + height\n      };\n    }\n\n  }\n\n  BoxAndWiskers.id = 'boxandwhiskers';\n  BoxAndWiskers.defaults = { ...chart_js.BarElement.defaults,\n    ...baseDefaults,\n    medianColor: 'transparent',\n    lowerBackgroundColor: 'transparent'\n  };\n  BoxAndWiskers.defaultRoutes = { ...chart_js.BarElement.defaultRoutes,\n    ...baseRoutes\n  };\n\n  class Violin extends StatsBase {\n    draw(ctx) {\n      ctx.save();\n      ctx.fillStyle = this.options.backgroundColor;\n      ctx.strokeStyle = this.options.borderColor;\n      ctx.lineWidth = this.options.borderWidth;\n      const props = this.getProps(['x', 'y', 'width', 'height', 'min', 'max', 'coords', 'maxEstimate']);\n      helpers.drawPoint(ctx, {\n        pointStyle: 'rectRot',\n        radius: 5,\n        borderWidth: this.options.borderWidth\n      }, props.x, props.y);\n\n      if (props.coords && props.coords.length > 0) {\n        this._drawCoords(ctx, props);\n      }\n\n      this._drawOutliers(ctx);\n\n      this._drawMeanDot(ctx);\n\n      ctx.restore();\n\n      this._drawItems(ctx);\n    }\n\n    _drawCoords(ctx, props) {\n      ctx.beginPath();\n\n      if (this.isVertical()) {\n        const {\n          x,\n          width\n        } = props;\n        const factor = width / 2 / props.maxEstimate;\n        ctx.moveTo(x, props.min);\n        props.coords.forEach(c => {\n          ctx.lineTo(x - c.estimate * factor, c.v);\n        });\n        ctx.lineTo(x, props.max);\n        ctx.moveTo(x, props.min);\n        props.coords.forEach(c => {\n          ctx.lineTo(x + c.estimate * factor, c.v);\n        });\n        ctx.lineTo(x, props.max);\n      } else {\n        const {\n          y,\n          height\n        } = props;\n        const factor = height / 2 / props.maxEstimate;\n        ctx.moveTo(props.min, y);\n        props.coords.forEach(c => {\n          ctx.lineTo(c.v, y - c.estimate * factor);\n        });\n        ctx.lineTo(props.max, y);\n        ctx.moveTo(props.min, y);\n        props.coords.forEach(c => {\n          ctx.lineTo(c.v, y + c.estimate * factor);\n        });\n        ctx.lineTo(props.max, y);\n      }\n\n      ctx.closePath();\n      ctx.stroke();\n      ctx.fill();\n    }\n\n    _getBounds(useFinalPosition) {\n      if (this.isVertical()) {\n        const {\n          x,\n          width,\n          min,\n          max\n        } = this.getProps(['x', 'width', 'min', 'max'], useFinalPosition);\n        const x0 = x - width / 2;\n        return {\n          left: x0,\n          top: max,\n          right: x0 + width,\n          bottom: min\n        };\n      }\n\n      const {\n        y,\n        height,\n        min,\n        max\n      } = this.getProps(['y', 'height', 'min', 'max'], useFinalPosition);\n      const y0 = y - height / 2;\n      return {\n        left: min,\n        top: y0,\n        right: max,\n        bottom: y0 + height\n      };\n    }\n\n  }\n\n  Violin.id = 'violin';\n  Violin.defaults = { ...chart_js.BarElement.defaults,\n    ...baseDefaults\n  };\n  Violin.defaultRoutes = { ...chart_js.BarElement.defaultRoutes,\n    ...baseRoutes\n  };\n\n  function patchController(type, config, controller, elements = [], scales = []) {\n    chart_js.registry.addControllers(controller);\n\n    if (Array.isArray(elements)) {\n      chart_js.registry.addElements(...elements);\n    } else {\n      chart_js.registry.addElements(elements);\n    }\n\n    if (Array.isArray(scales)) {\n      chart_js.registry.addScales(...scales);\n    } else {\n      chart_js.registry.addScales(scales);\n    }\n\n    const c = config;\n    c.type = type;\n    return c;\n  }\n\n  class BoxPlotController extends StatsBase$1 {\n    _parseStats(value, config) {\n      return asBoxPlotStats(value, config);\n    }\n\n    _transformStats(target, source, mapper) {\n      super._transformStats(target, source, mapper);\n\n      for (const key of ['whiskerMin', 'whiskerMax']) {\n        target[key] = mapper(source[key]);\n      }\n    }\n\n  }\n\n  BoxPlotController.id = 'boxplot';\n  BoxPlotController.defaults = helpers.merge({}, [chart_js.BarController.defaults, baseDefaults$1(boxOptionsKeys), {\n    animations: {\n      numbers: {\n        type: 'number',\n        properties: chart_js.BarController.defaults.animations.numbers.properties.concat(['q1', 'q3', 'min', 'max', 'median', 'whiskerMin', 'whiskerMax', 'mean'], boxOptionsKeys.filter(c => !c.endsWith('Color')))\n      }\n    },\n    dataElementType: BoxAndWiskers.id\n  }]);\n  BoxPlotController.overrides = helpers.merge({}, [chart_js.BarController.overrides, defaultOverrides()]);\n\n  class BoxPlotChart extends chart_js.Chart {\n    constructor(item, config) {\n      super(item, patchController('boxplot', config, BoxPlotController, BoxAndWiskers, [chart_js.LinearScale, chart_js.CategoryScale]));\n    }\n\n  }\n\n  BoxPlotChart.id = BoxPlotController.id;\n\n  class ViolinController extends StatsBase$1 {\n    _parseStats(value, config) {\n      return asViolinStats(value, config);\n    }\n\n    _transformStats(target, source, mapper) {\n      super._transformStats(target, source, mapper);\n\n      target.maxEstimate = source.maxEstimate;\n\n      if (Array.isArray(source.coords)) {\n        target.coords = source.coords.map(c => ({ ...c,\n          v: mapper(c.v)\n        }));\n      }\n    }\n\n  }\n\n  ViolinController.id = 'violin';\n  ViolinController.defaults = helpers.merge({}, [chart_js.BarController.defaults, baseDefaults$1(baseOptionKeys), {\n    points: 100,\n    animations: {\n      numbers: {\n        type: 'number',\n        properties: chart_js.BarController.defaults.animations.numbers.properties.concat(['q1', 'q3', 'min', 'max', 'median', 'maxEstimate'], baseOptionKeys.filter(c => !c.endsWith('Color')))\n      },\n      kdeCoords: {\n        fn: interpolateKdeCoords,\n        properties: ['coords']\n      }\n    },\n    dataElementType: Violin.id\n  }]);\n  ViolinController.overrides = helpers.merge({}, [chart_js.BarController.overrides, defaultOverrides()]);\n\n  class ViolinChart extends chart_js.Chart {\n    constructor(item, config) {\n      super(item, patchController('violin', config, ViolinController, Violin, [chart_js.LinearScale, chart_js.CategoryScale]));\n    }\n\n  }\n\n  ViolinChart.id = ViolinController.id;\n  chart_js.registry.addControllers(BoxPlotController, ViolinController);\n  chart_js.registry.addElements(BoxAndWiskers, Violin);\n  exports.BoxAndWiskers = BoxAndWiskers;\n  exports.BoxPlotChart = BoxPlotChart;\n  exports.BoxPlotController = BoxPlotController;\n  exports.StatsBase = StatsBase;\n  exports.Violin = Violin;\n  exports.ViolinChart = ViolinChart;\n  exports.ViolinController = ViolinController;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","map":{"version":3,"sources":["../.yarn/cache/@sgratzl-boxplots-npm-1.2.2-41f1e6d788-9164f4ae21.zip/node_modules/@sgratzl/boxplots/build/index.esm.js","../src/kde.ts","../src/data.ts","../src/animation.ts","../src/tooltip.ts","../src/controllers/StatsBase.ts","../src/elements/base.ts","../src/elements/BoxAndWiskers.ts","../src/elements/Violin.ts","../src/controllers/patchController.ts","../src/controllers/BoxPlotController.ts","../src/controllers/ViolinController.ts","../src/index.umd.ts"],"names":["boxplots","Tooltip","baseDefaults","StatsBase","BarController","formatNumber","Element","drawPoint","BarElement","registry","merge","Chart","LinearScale","CategoryScale"],"mappings":"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","sourcesContent":["/**\n * @sgratzl/boxplots\n * https://github.com/sgratzl/boxplots\n *\n * Copyright (c) 2021 Samuel Gratzl <sam@sgratzl.com>\n */\n\nfunction quantilesInterpolate(arr, length, interpolate) {\n    const n1 = length - 1;\n    const compute = (q) => {\n        const index = q * n1;\n        const lo = Math.floor(index);\n        const h = index - lo;\n        const a = arr[lo];\n        return h === 0 ? a : interpolate(a, arr[Math.min(lo + 1, n1)], h);\n    };\n    return {\n        q1: compute(0.25),\n        median: compute(0.5),\n        q3: compute(0.75),\n    };\n}\nfunction quantilesType7(arr, length = arr.length) {\n    return quantilesInterpolate(arr, length, (a, b, alpha) => a + alpha * (b - a));\n}\nfunction quantilesLinear(arr, length = arr.length) {\n    return quantilesInterpolate(arr, length, (i, j, fraction) => i + (j - i) * fraction);\n}\nfunction quantilesLower(arr, length = arr.length) {\n    return quantilesInterpolate(arr, length, (i) => i);\n}\nfunction quantilesHigher(arr, length = arr.length) {\n    return quantilesInterpolate(arr, length, (_, j) => j);\n}\nfunction quantilesNearest(arr, length = arr.length) {\n    return quantilesInterpolate(arr, length, (i, j, fraction) => (fraction < 0.5 ? i : j));\n}\nfunction quantilesMidpoint(arr, length = arr.length) {\n    return quantilesInterpolate(arr, length, (i, j) => (i + j) * 0.5);\n}\nfunction quantilesFivenum(arr, length = arr.length) {\n    const n = length;\n    const n4 = Math.floor((n + 3) / 2) / 2;\n    const compute = (d) => 0.5 * (arr[Math.floor(d) - 1] + arr[Math.ceil(d) - 1]);\n    return {\n        q1: compute(n4),\n        median: compute((n + 1) / 2),\n        q3: compute(n + 1 - n4),\n    };\n}\nfunction quantilesHinges(arr, length = arr.length) {\n    return quantilesFivenum(arr, length);\n}\n\nfunction createSortedData(data) {\n    let min = Number.POSITIVE_INFINITY;\n    let max = Number.NEGATIVE_INFINITY;\n    let sum = 0;\n    let valid = 0;\n    const length = data.length;\n    const vs = data instanceof Float64Array ? new Float64Array(length) : new Float32Array(length);\n    for (let i = 0; i < length; ++i) {\n        const v = data[i];\n        if (v == null || Number.isNaN(v)) {\n            continue;\n        }\n        vs[valid] = v;\n        valid++;\n        if (v < min) {\n            min = v;\n        }\n        if (v > max) {\n            max = v;\n        }\n        sum += v;\n    }\n    const missing = length - valid;\n    if (valid === 0) {\n        return {\n            sum,\n            min,\n            max,\n            missing,\n            s: [],\n        };\n    }\n    const s = valid === length ? vs : vs.subarray(0, valid);\n    s.sort((a, b) => (a === b ? 0 : a < b ? -1 : 1));\n    return {\n        sum,\n        min: s[0],\n        max: s[s.length - 1],\n        missing,\n        s,\n    };\n}\nfunction withSortedData(data) {\n    if (data.length === 0) {\n        return {\n            sum: Number.NaN,\n            min: Number.NaN,\n            max: Number.NaN,\n            missing: 0,\n            s: [],\n        };\n    }\n    const min = data[0];\n    const max = data[data.length - 1];\n    const red = (acc, v) => acc + v;\n    const sum = data instanceof Float32Array\n        ? data.reduce(red, 0)\n        : data instanceof Float64Array\n            ? data.reduce(red, 0)\n            : data.reduce(red, 0);\n    return {\n        sum,\n        min,\n        max,\n        missing: 0,\n        s: data,\n    };\n}\nfunction boxplot(data, options = {}) {\n    const { quantiles, validAndSorted, coef, whiskersMode, eps } = Object.assign({\n        coef: 1.5,\n        eps: 10e-3,\n        quantiles: quantilesType7,\n        validAndSorted: false,\n        whiskersMode: 'nearest',\n    }, options);\n    const { missing, s, min, max, sum } = validAndSorted ? withSortedData(data) : createSortedData(data);\n    const invalid = {\n        min: Number.NaN,\n        max: Number.NaN,\n        mean: Number.NaN,\n        missing,\n        iqr: Number.NaN,\n        count: data.length,\n        whiskerHigh: Number.NaN,\n        whiskerLow: Number.NaN,\n        outlier: [],\n        median: Number.NaN,\n        q1: Number.NaN,\n        q3: Number.NaN,\n        items: [],\n    };\n    const same = (a, b) => Math.abs(a - b) < eps;\n    const valid = data.length - missing;\n    if (valid === 0) {\n        return invalid;\n    }\n    const { median, q1, q3 } = quantiles(s, valid);\n    const iqr = q3 - q1;\n    const isCoefValid = typeof coef === 'number' && coef > 0;\n    let whiskerLow = isCoefValid ? Math.max(min, q1 - coef * iqr) : min;\n    let whiskerHigh = isCoefValid ? Math.min(max, q3 + coef * iqr) : max;\n    const outlier = [];\n    for (let i = 0; i < valid; ++i) {\n        const v = s[i];\n        if (v >= whiskerLow || same(v, whiskerLow)) {\n            if (whiskersMode === 'nearest') {\n                whiskerLow = v;\n            }\n            break;\n        }\n        if (outlier.length === 0 || !same(outlier[outlier.length - 1], v)) {\n            outlier.push(v);\n        }\n    }\n    const reversedOutliers = [];\n    for (let i = valid - 1; i >= 0; --i) {\n        const v = s[i];\n        if (v <= whiskerHigh || same(v, whiskerHigh)) {\n            if (whiskersMode === 'nearest') {\n                whiskerHigh = v;\n            }\n            break;\n        }\n        if ((reversedOutliers.length === 0 || !same(reversedOutliers[reversedOutliers.length - 1], v)) &&\n            (outlier.length === 0 || !same(outlier[outlier.length - 1], v))) {\n            reversedOutliers.push(v);\n        }\n    }\n    return {\n        min,\n        max,\n        count: data.length,\n        missing,\n        mean: sum / valid,\n        whiskerHigh,\n        whiskerLow,\n        outlier: outlier.concat(reversedOutliers.reverse()),\n        median,\n        q1,\n        q3,\n        iqr,\n        items: s,\n    };\n}\n\nexport default boxplot;\nexport { boxplot, quantilesFivenum, quantilesHigher, quantilesHinges, quantilesInterpolate, quantilesLinear, quantilesLower, quantilesMidpoint, quantilesNearest, quantilesType7 };\n//# sourceMappingURL=index.esm.js.map\n",null,null,null,null,null,null,null,null,null,null,null,null]},"metadata":{},"sourceType":"script"}